!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=5)}([function(t,n,r){"use strict";r.r(n),r.d(n,"EPSILON",function(){return e}),r.d(n,"ARRAY_TYPE",function(){return o}),r.d(n,"RANDOM",function(){return a}),r.d(n,"setMatrixArrayType",function(){return i}),r.d(n,"toRadian",function(){return c}),r.d(n,"equals",function(){return s});var e=1e-6,o="undefined"!=typeof Float32Array?Float32Array:Array,a=Math.random;function i(t){o=t}var u=Math.PI/180;function c(t){return t*u}function s(t,n){return Math.abs(t-n)<=e*Math.max(1,Math.abs(t),Math.abs(n))}},function(t,n,r){"use strict";r.r(n),r.d(n,"create",function(){return o}),r.d(n,"clone",function(){return a}),r.d(n,"length",function(){return i}),r.d(n,"fromValues",function(){return u}),r.d(n,"copy",function(){return c}),r.d(n,"set",function(){return s}),r.d(n,"add",function(){return f}),r.d(n,"subtract",function(){return l}),r.d(n,"multiply",function(){return d}),r.d(n,"divide",function(){return h}),r.d(n,"ceil",function(){return m}),r.d(n,"floor",function(){return v}),r.d(n,"min",function(){return p}),r.d(n,"max",function(){return M}),r.d(n,"round",function(){return g}),r.d(n,"scale",function(){return b}),r.d(n,"scaleAndAdd",function(){return w}),r.d(n,"distance",function(){return E}),r.d(n,"squaredDistance",function(){return R}),r.d(n,"squaredLength",function(){return T}),r.d(n,"negate",function(){return x}),r.d(n,"inverse",function(){return A}),r.d(n,"normalize",function(){return _}),r.d(n,"dot",function(){return P}),r.d(n,"cross",function(){return y}),r.d(n,"lerp",function(){return L}),r.d(n,"hermite",function(){return S}),r.d(n,"bezier",function(){return O}),r.d(n,"random",function(){return F}),r.d(n,"transformMat4",function(){return D}),r.d(n,"transformMat3",function(){return I}),r.d(n,"transformQuat",function(){return C}),r.d(n,"rotateX",function(){return N}),r.d(n,"rotateY",function(){return Y}),r.d(n,"rotateZ",function(){return q}),r.d(n,"angle",function(){return U}),r.d(n,"zero",function(){return B}),r.d(n,"str",function(){return z}),r.d(n,"exactEquals",function(){return j}),r.d(n,"equals",function(){return V}),r.d(n,"sub",function(){return X}),r.d(n,"mul",function(){return G}),r.d(n,"div",function(){return H}),r.d(n,"dist",function(){return W}),r.d(n,"sqrDist",function(){return Q}),r.d(n,"len",function(){return Z}),r.d(n,"sqrLen",function(){return $}),r.d(n,"forEach",function(){return K});var e=r(0);function o(){var t=new e.ARRAY_TYPE(3);return e.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var n=new e.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function i(t){var n=t[0],r=t[1],e=t[2];return Math.sqrt(n*n+r*r+e*e)}function u(t,n,r){var o=new e.ARRAY_TYPE(3);return o[0]=t,o[1]=n,o[2]=r,o}function c(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t}function s(t,n,r,e){return t[0]=n,t[1]=r,t[2]=e,t}function f(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t}function l(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t}function d(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t}function h(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t}function m(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t}function v(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t}function p(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t}function M(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t}function g(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t}function b(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t}function w(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t}function E(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return Math.sqrt(r*r+e*e+o*o)}function R(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2];return r*r+e*e+o*o}function T(t){var n=t[0],r=t[1],e=t[2];return n*n+r*r+e*e}function x(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t}function A(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t}function _(t,n){var r=n[0],e=n[1],o=n[2],a=r*r+e*e+o*o;return a>0&&(a=1/Math.sqrt(a)),t[0]=n[0]*a,t[1]=n[1]*a,t[2]=n[2]*a,t}function P(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function y(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[0],u=r[1],c=r[2];return t[0]=o*c-a*u,t[1]=a*i-e*c,t[2]=e*u-o*i,t}function L(t,n,r,e){var o=n[0],a=n[1],i=n[2];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t[2]=i+e*(r[2]-i),t}function S(t,n,r,e,o,a){var i=a*a,u=i*(2*a-3)+1,c=i*(a-2)+a,s=i*(a-1),f=i*(3-2*a);return t[0]=n[0]*u+r[0]*c+e[0]*s+o[0]*f,t[1]=n[1]*u+r[1]*c+e[1]*s+o[1]*f,t[2]=n[2]*u+r[2]*c+e[2]*s+o[2]*f,t}function O(t,n,r,e,o,a){var i=1-a,u=i*i,c=a*a,s=u*i,f=3*a*u,l=3*c*i,d=c*a;return t[0]=n[0]*s+r[0]*f+e[0]*l+o[0]*d,t[1]=n[1]*s+r[1]*f+e[1]*l+o[1]*d,t[2]=n[2]*s+r[2]*f+e[2]*l+o[2]*d,t}function F(t,n){n=n||1;var r=2*e.RANDOM()*Math.PI,o=2*e.RANDOM()-1,a=Math.sqrt(1-o*o)*n;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t[2]=o*n,t}function D(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[3]*e+r[7]*o+r[11]*a+r[15];return i=i||1,t[0]=(r[0]*e+r[4]*o+r[8]*a+r[12])/i,t[1]=(r[1]*e+r[5]*o+r[9]*a+r[13])/i,t[2]=(r[2]*e+r[6]*o+r[10]*a+r[14])/i,t}function I(t,n,r){var e=n[0],o=n[1],a=n[2];return t[0]=e*r[0]+o*r[3]+a*r[6],t[1]=e*r[1]+o*r[4]+a*r[7],t[2]=e*r[2]+o*r[5]+a*r[8],t}function C(t,n,r){var e=r[0],o=r[1],a=r[2],i=r[3],u=n[0],c=n[1],s=n[2],f=o*s-a*c,l=a*u-e*s,d=e*c-o*u,h=o*d-a*l,m=a*f-e*d,v=e*l-o*f,p=2*i;return f*=p,l*=p,d*=p,h*=2,m*=2,v*=2,t[0]=u+f+h,t[1]=c+l+m,t[2]=s+d+v,t}function N(t,n,r,e){var o=[],a=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],a[0]=o[0],a[1]=o[1]*Math.cos(e)-o[2]*Math.sin(e),a[2]=o[1]*Math.sin(e)+o[2]*Math.cos(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Y(t,n,r,e){var o=[],a=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],a[0]=o[2]*Math.sin(e)+o[0]*Math.cos(e),a[1]=o[1],a[2]=o[2]*Math.cos(e)-o[0]*Math.sin(e),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function q(t,n,r,e){var o=[],a=[];return o[0]=n[0]-r[0],o[1]=n[1]-r[1],o[2]=n[2]-r[2],a[0]=o[0]*Math.cos(e)-o[1]*Math.sin(e),a[1]=o[0]*Math.sin(e)+o[1]*Math.cos(e),a[2]=o[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function U(t,n){var r=u(t[0],t[1],t[2]),e=u(n[0],n[1],n[2]);_(r,r),_(e,e);var o=P(r,e);return o>1?0:o<-1?Math.PI:Math.acos(o)}function B(t){return t[0]=0,t[1]=0,t[2]=0,t}function z(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function j(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]}function V(t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],c=n[2];return Math.abs(r-i)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-u)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-c)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))}var k,X=l,G=d,H=h,W=E,Q=R,Z=i,$=T,K=(k=o(),function(t,n,r,e,o,a){var i,u;for(n||(n=3),r||(r=0),u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)k[0]=t[i],k[1]=t[i+1],k[2]=t[i+2],o(k,k,a),t[i]=k[0],t[i+1]=k[1],t[i+2]=k[2];return t})},function(t,n,r){"use strict";r.r(n),r.d(n,"create",function(){return o}),r.d(n,"clone",function(){return a}),r.d(n,"copy",function(){return i}),r.d(n,"fromValues",function(){return u}),r.d(n,"set",function(){return c}),r.d(n,"identity",function(){return s}),r.d(n,"transpose",function(){return f}),r.d(n,"invert",function(){return l}),r.d(n,"adjoint",function(){return d}),r.d(n,"determinant",function(){return h}),r.d(n,"multiply",function(){return m}),r.d(n,"translate",function(){return v}),r.d(n,"scale",function(){return p}),r.d(n,"rotate",function(){return M}),r.d(n,"rotateX",function(){return g}),r.d(n,"rotateY",function(){return b}),r.d(n,"rotateZ",function(){return w}),r.d(n,"fromTranslation",function(){return E}),r.d(n,"fromScaling",function(){return R}),r.d(n,"fromRotation",function(){return T}),r.d(n,"fromXRotation",function(){return x}),r.d(n,"fromYRotation",function(){return A}),r.d(n,"fromZRotation",function(){return _}),r.d(n,"fromRotationTranslation",function(){return P}),r.d(n,"fromQuat2",function(){return y}),r.d(n,"getTranslation",function(){return L}),r.d(n,"getScaling",function(){return S}),r.d(n,"getRotation",function(){return O}),r.d(n,"fromRotationTranslationScale",function(){return F}),r.d(n,"fromRotationTranslationScaleOrigin",function(){return D}),r.d(n,"fromQuat",function(){return I}),r.d(n,"frustum",function(){return C}),r.d(n,"perspective",function(){return N}),r.d(n,"perspectiveFromFieldOfView",function(){return Y}),r.d(n,"ortho",function(){return q}),r.d(n,"lookAt",function(){return U}),r.d(n,"targetTo",function(){return B}),r.d(n,"str",function(){return z}),r.d(n,"frob",function(){return j}),r.d(n,"add",function(){return V}),r.d(n,"subtract",function(){return k}),r.d(n,"multiplyScalar",function(){return X}),r.d(n,"multiplyScalarAndAdd",function(){return G}),r.d(n,"exactEquals",function(){return H}),r.d(n,"equals",function(){return W}),r.d(n,"mul",function(){return Q}),r.d(n,"sub",function(){return Z});var e=r(0);function o(){var t=new e.ARRAY_TYPE(16);return e.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function a(t){var n=new e.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function i(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function u(t,n,r,o,a,i,u,c,s,f,l,d,h,m,v,p){var M=new e.ARRAY_TYPE(16);return M[0]=t,M[1]=n,M[2]=r,M[3]=o,M[4]=a,M[5]=i,M[6]=u,M[7]=c,M[8]=s,M[9]=f,M[10]=l,M[11]=d,M[12]=h,M[13]=m,M[14]=v,M[15]=p,M}function c(t,n,r,e,o,a,i,u,c,s,f,l,d,h,m,v,p){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=d,t[12]=h,t[13]=m,t[14]=v,t[15]=p,t}function s(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,n){if(t===n){var r=n[1],e=n[2],o=n[3],a=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=r,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=a,t[11]=n[14],t[12]=o,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function l(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],h=n[11],m=n[12],v=n[13],p=n[14],M=n[15],g=r*u-e*i,b=r*c-o*i,w=r*s-a*i,E=e*c-o*u,R=e*s-a*u,T=o*s-a*c,x=f*v-l*m,A=f*p-d*m,_=f*M-h*m,P=l*p-d*v,y=l*M-h*v,L=d*M-h*p,S=g*L-b*y+w*P+E*_-R*A+T*x;return S?(S=1/S,t[0]=(u*L-c*y+s*P)*S,t[1]=(o*y-e*L-a*P)*S,t[2]=(v*T-p*R+M*E)*S,t[3]=(d*R-l*T-h*E)*S,t[4]=(c*_-i*L-s*A)*S,t[5]=(r*L-o*_+a*A)*S,t[6]=(p*w-m*T-M*b)*S,t[7]=(f*T-d*w+h*b)*S,t[8]=(i*y-u*_+s*x)*S,t[9]=(e*_-r*y-a*x)*S,t[10]=(m*R-v*w+M*g)*S,t[11]=(l*w-f*R-h*g)*S,t[12]=(u*A-i*P-c*x)*S,t[13]=(r*P-e*A+o*x)*S,t[14]=(v*b-m*E-p*g)*S,t[15]=(f*E-l*b+d*g)*S,t):null}function d(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],h=n[11],m=n[12],v=n[13],p=n[14],M=n[15];return t[0]=u*(d*M-h*p)-l*(c*M-s*p)+v*(c*h-s*d),t[1]=-(e*(d*M-h*p)-l*(o*M-a*p)+v*(o*h-a*d)),t[2]=e*(c*M-s*p)-u*(o*M-a*p)+v*(o*s-a*c),t[3]=-(e*(c*h-s*d)-u*(o*h-a*d)+l*(o*s-a*c)),t[4]=-(i*(d*M-h*p)-f*(c*M-s*p)+m*(c*h-s*d)),t[5]=r*(d*M-h*p)-f*(o*M-a*p)+m*(o*h-a*d),t[6]=-(r*(c*M-s*p)-i*(o*M-a*p)+m*(o*s-a*c)),t[7]=r*(c*h-s*d)-i*(o*h-a*d)+f*(o*s-a*c),t[8]=i*(l*M-h*v)-f*(u*M-s*v)+m*(u*h-s*l),t[9]=-(r*(l*M-h*v)-f*(e*M-a*v)+m*(e*h-a*l)),t[10]=r*(u*M-s*v)-i*(e*M-a*v)+m*(e*s-a*u),t[11]=-(r*(u*h-s*l)-i*(e*h-a*l)+f*(e*s-a*u)),t[12]=-(i*(l*p-d*v)-f*(u*p-c*v)+m*(u*d-c*l)),t[13]=r*(l*p-d*v)-f*(e*p-o*v)+m*(e*d-o*l),t[14]=-(r*(u*p-c*v)-i*(e*p-o*v)+m*(e*c-o*u)),t[15]=r*(u*d-c*l)-i*(e*d-o*l)+f*(e*c-o*u),t}function h(t){var n=t[0],r=t[1],e=t[2],o=t[3],a=t[4],i=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],d=t[11],h=t[12],m=t[13],v=t[14],p=t[15];return(n*i-r*a)*(l*p-d*v)-(n*u-e*a)*(f*p-d*m)+(n*c-o*a)*(f*v-l*m)+(r*u-e*i)*(s*p-d*h)-(r*c-o*i)*(s*v-l*h)+(e*c-o*u)*(s*m-f*h)}function m(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=n[9],h=n[10],m=n[11],v=n[12],p=n[13],M=n[14],g=n[15],b=r[0],w=r[1],E=r[2],R=r[3];return t[0]=b*e+w*u+E*l+R*v,t[1]=b*o+w*c+E*d+R*p,t[2]=b*a+w*s+E*h+R*M,t[3]=b*i+w*f+E*m+R*g,b=r[4],w=r[5],E=r[6],R=r[7],t[4]=b*e+w*u+E*l+R*v,t[5]=b*o+w*c+E*d+R*p,t[6]=b*a+w*s+E*h+R*M,t[7]=b*i+w*f+E*m+R*g,b=r[8],w=r[9],E=r[10],R=r[11],t[8]=b*e+w*u+E*l+R*v,t[9]=b*o+w*c+E*d+R*p,t[10]=b*a+w*s+E*h+R*M,t[11]=b*i+w*f+E*m+R*g,b=r[12],w=r[13],E=r[14],R=r[15],t[12]=b*e+w*u+E*l+R*v,t[13]=b*o+w*c+E*d+R*p,t[14]=b*a+w*s+E*h+R*M,t[15]=b*i+w*f+E*m+R*g,t}function v(t,n,r){var e,o,a,i,u,c,s,f,l,d,h,m,v=r[0],p=r[1],M=r[2];return n===t?(t[12]=n[0]*v+n[4]*p+n[8]*M+n[12],t[13]=n[1]*v+n[5]*p+n[9]*M+n[13],t[14]=n[2]*v+n[6]*p+n[10]*M+n[14],t[15]=n[3]*v+n[7]*p+n[11]*M+n[15]):(e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=n[9],h=n[10],m=n[11],t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=c,t[6]=s,t[7]=f,t[8]=l,t[9]=d,t[10]=h,t[11]=m,t[12]=e*v+u*p+l*M+n[12],t[13]=o*v+c*p+d*M+n[13],t[14]=a*v+s*p+h*M+n[14],t[15]=i*v+f*p+m*M+n[15]),t}function p(t,n,r){var e=r[0],o=r[1],a=r[2];return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*o,t[5]=n[5]*o,t[6]=n[6]*o,t[7]=n[7]*o,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function M(t,n,r,o){var a,i,u,c,s,f,l,d,h,m,v,p,M,g,b,w,E,R,T,x,A,_,P,y,L=o[0],S=o[1],O=o[2],F=Math.sqrt(L*L+S*S+O*O);return F<e.EPSILON?null:(L*=F=1/F,S*=F,O*=F,a=Math.sin(r),u=1-(i=Math.cos(r)),c=n[0],s=n[1],f=n[2],l=n[3],d=n[4],h=n[5],m=n[6],v=n[7],p=n[8],M=n[9],g=n[10],b=n[11],w=L*L*u+i,E=S*L*u+O*a,R=O*L*u-S*a,T=L*S*u-O*a,x=S*S*u+i,A=O*S*u+L*a,_=L*O*u+S*a,P=S*O*u-L*a,y=O*O*u+i,t[0]=c*w+d*E+p*R,t[1]=s*w+h*E+M*R,t[2]=f*w+m*E+g*R,t[3]=l*w+v*E+b*R,t[4]=c*T+d*x+p*A,t[5]=s*T+h*x+M*A,t[6]=f*T+m*x+g*A,t[7]=l*T+v*x+b*A,t[8]=c*_+d*P+p*y,t[9]=s*_+h*P+M*y,t[10]=f*_+m*P+g*y,t[11]=l*_+v*P+b*y,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function g(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[4],i=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*o+s*e,t[5]=i*o+f*e,t[6]=u*o+l*e,t[7]=c*o+d*e,t[8]=s*o-a*e,t[9]=f*o-i*e,t[10]=l*o-u*e,t[11]=d*o-c*e,t}function b(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[0],i=n[1],u=n[2],c=n[3],s=n[8],f=n[9],l=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o-s*e,t[1]=i*o-f*e,t[2]=u*o-l*e,t[3]=c*o-d*e,t[8]=a*e+s*o,t[9]=i*e+f*o,t[10]=u*e+l*o,t[11]=c*e+d*o,t}function w(t,n,r){var e=Math.sin(r),o=Math.cos(r),a=n[0],i=n[1],u=n[2],c=n[3],s=n[4],f=n[5],l=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*o+s*e,t[1]=i*o+f*e,t[2]=u*o+l*e,t[3]=c*o+d*e,t[4]=s*o-a*e,t[5]=f*o-i*e,t[6]=l*o-u*e,t[7]=d*o-c*e,t}function E(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function R(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function T(t,n,r){var o,a,i,u=r[0],c=r[1],s=r[2],f=Math.sqrt(u*u+c*c+s*s);return f<e.EPSILON?null:(u*=f=1/f,c*=f,s*=f,o=Math.sin(n),i=1-(a=Math.cos(n)),t[0]=u*u*i+a,t[1]=c*u*i+s*o,t[2]=s*u*i-c*o,t[3]=0,t[4]=u*c*i-s*o,t[5]=c*c*i+a,t[6]=s*c*i+u*o,t[7]=0,t[8]=u*s*i+c*o,t[9]=c*s*i-u*o,t[10]=s*s*i+a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function x(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function _(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=e+e,c=o+o,s=a+a,f=e*u,l=e*c,d=e*s,h=o*c,m=o*s,v=a*s,p=i*u,M=i*c,g=i*s;return t[0]=1-(h+v),t[1]=l+g,t[2]=d-M,t[3]=0,t[4]=l-g,t[5]=1-(f+v),t[6]=m+p,t[7]=0,t[8]=d+M,t[9]=m-p,t[10]=1-(f+h),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function y(t,n){var r=new e.ARRAY_TYPE(3),o=-n[0],a=-n[1],i=-n[2],u=n[3],c=n[4],s=n[5],f=n[6],l=n[7],d=o*o+a*a+i*i+u*u;return d>0?(r[0]=2*(c*u+l*o+s*i-f*a)/d,r[1]=2*(s*u+l*a+f*o-c*i)/d,r[2]=2*(f*u+l*i+c*a-s*o)/d):(r[0]=2*(c*u+l*o+s*i-f*a),r[1]=2*(s*u+l*a+f*o-c*i),r[2]=2*(f*u+l*i+c*a-s*o)),P(t,n,r),t}function L(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function S(t,n){var r=n[0],e=n[1],o=n[2],a=n[4],i=n[5],u=n[6],c=n[8],s=n[9],f=n[10];return t[0]=Math.sqrt(r*r+e*e+o*o),t[1]=Math.sqrt(a*a+i*i+u*u),t[2]=Math.sqrt(c*c+s*s+f*f),t}function O(t,n){var r=n[0]+n[5]+n[10],e=0;return r>0?(e=2*Math.sqrt(r+1),t[3]=.25*e,t[0]=(n[6]-n[9])/e,t[1]=(n[8]-n[2])/e,t[2]=(n[1]-n[4])/e):n[0]>n[5]&&n[0]>n[10]?(e=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/e,t[0]=.25*e,t[1]=(n[1]+n[4])/e,t[2]=(n[8]+n[2])/e):n[5]>n[10]?(e=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/e,t[0]=(n[1]+n[4])/e,t[1]=.25*e,t[2]=(n[6]+n[9])/e):(e=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/e,t[0]=(n[8]+n[2])/e,t[1]=(n[6]+n[9])/e,t[2]=.25*e),t}function F(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=n[3],c=o+o,s=a+a,f=i+i,l=o*c,d=o*s,h=o*f,m=a*s,v=a*f,p=i*f,M=u*c,g=u*s,b=u*f,w=e[0],E=e[1],R=e[2];return t[0]=(1-(m+p))*w,t[1]=(d+b)*w,t[2]=(h-g)*w,t[3]=0,t[4]=(d-b)*E,t[5]=(1-(l+p))*E,t[6]=(v+M)*E,t[7]=0,t[8]=(h+g)*R,t[9]=(v-M)*R,t[10]=(1-(l+m))*R,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function D(t,n,r,e,o){var a=n[0],i=n[1],u=n[2],c=n[3],s=a+a,f=i+i,l=u+u,d=a*s,h=a*f,m=a*l,v=i*f,p=i*l,M=u*l,g=c*s,b=c*f,w=c*l,E=e[0],R=e[1],T=e[2],x=o[0],A=o[1],_=o[2],P=(1-(v+M))*E,y=(h+w)*E,L=(m-b)*E,S=(h-w)*R,O=(1-(d+M))*R,F=(p+g)*R,D=(m+b)*T,I=(p-g)*T,C=(1-(d+v))*T;return t[0]=P,t[1]=y,t[2]=L,t[3]=0,t[4]=S,t[5]=O,t[6]=F,t[7]=0,t[8]=D,t[9]=I,t[10]=C,t[11]=0,t[12]=r[0]+x-(P*x+S*A+D*_),t[13]=r[1]+A-(y*x+O*A+I*_),t[14]=r[2]+_-(L*x+F*A+C*_),t[15]=1,t}function I(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r+r,u=e+e,c=o+o,s=r*i,f=e*i,l=e*u,d=o*i,h=o*u,m=o*c,v=a*i,p=a*u,M=a*c;return t[0]=1-l-m,t[1]=f+M,t[2]=d-p,t[3]=0,t[4]=f-M,t[5]=1-s-m,t[6]=h+v,t[7]=0,t[8]=d+p,t[9]=h-v,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,n,r,e,o,a,i){var u=1/(r-n),c=1/(o-e),s=1/(a-i);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*c,t[6]=0,t[7]=0,t[8]=(r+n)*u,t[9]=(o+e)*c,t[10]=(i+a)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*a*2*s,t[15]=0,t}function N(t,n,r,e,o){var a,i=1/Math.tan(n/2);return t[0]=i/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=o&&o!==1/0?(a=1/(e-o),t[10]=(o+e)*a,t[14]=2*o*e*a):(t[10]=-1,t[14]=-2*e),t}function Y(t,n,r,e){var o=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(i+u),s=2/(o+a);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*c*.5,t[9]=(o-a)*s*.5,t[10]=e/(r-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*r/(r-e),t[15]=0,t}function q(t,n,r,e,o,a,i){var u=1/(n-r),c=1/(e-o),s=1/(a-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+r)*u,t[13]=(o+e)*c,t[14]=(i+a)*s,t[15]=1,t}function U(t,n,r,o){var a,i,u,c,f,l,d,h,m,v,p=n[0],M=n[1],g=n[2],b=o[0],w=o[1],E=o[2],R=r[0],T=r[1],x=r[2];return Math.abs(p-R)<e.EPSILON&&Math.abs(M-T)<e.EPSILON&&Math.abs(g-x)<e.EPSILON?s(t):(d=p-R,h=M-T,m=g-x,a=w*(m*=v=1/Math.sqrt(d*d+h*h+m*m))-E*(h*=v),i=E*(d*=v)-b*m,u=b*h-w*d,(v=Math.sqrt(a*a+i*i+u*u))?(a*=v=1/v,i*=v,u*=v):(a=0,i=0,u=0),c=h*u-m*i,f=m*a-d*u,l=d*i-h*a,(v=Math.sqrt(c*c+f*f+l*l))?(c*=v=1/v,f*=v,l*=v):(c=0,f=0,l=0),t[0]=a,t[1]=c,t[2]=d,t[3]=0,t[4]=i,t[5]=f,t[6]=h,t[7]=0,t[8]=u,t[9]=l,t[10]=m,t[11]=0,t[12]=-(a*p+i*M+u*g),t[13]=-(c*p+f*M+l*g),t[14]=-(d*p+h*M+m*g),t[15]=1,t)}function B(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=e[0],c=e[1],s=e[2],f=o-r[0],l=a-r[1],d=i-r[2],h=f*f+l*l+d*d;h>0&&(f*=h=1/Math.sqrt(h),l*=h,d*=h);var m=c*d-s*l,v=s*f-u*d,p=u*l-c*f;return(h=m*m+v*v+p*p)>0&&(m*=h=1/Math.sqrt(h),v*=h,p*=h),t[0]=m,t[1]=v,t[2]=p,t[3]=0,t[4]=l*p-d*v,t[5]=d*m-f*p,t[6]=f*v-l*m,t[7]=0,t[8]=f,t[9]=l,t[10]=d,t[11]=0,t[12]=o,t[13]=a,t[14]=i,t[15]=1,t}function z(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function j(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function V(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t[9]=n[9]+r[9],t[10]=n[10]+r[10],t[11]=n[11]+r[11],t[12]=n[12]+r[12],t[13]=n[13]+r[13],t[14]=n[14]+r[14],t[15]=n[15]+r[15],t}function k(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t[9]=n[9]-r[9],t[10]=n[10]-r[10],t[11]=n[11]-r[11],t[12]=n[12]-r[12],t[13]=n[13]-r[13],t[14]=n[14]-r[14],t[15]=n[15]-r[15],t}function X(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t[9]=n[9]*r,t[10]=n[10]*r,t[11]=n[11]*r,t[12]=n[12]*r,t[13]=n[13]*r,t[14]=n[14]*r,t[15]=n[15]*r,t}function G(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t[9]=n[9]+r[9]*e,t[10]=n[10]+r[10]*e,t[11]=n[11]+r[11]*e,t[12]=n[12]+r[12]*e,t[13]=n[13]+r[13]*e,t[14]=n[14]+r[14]*e,t[15]=n[15]+r[15]*e,t}function H(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function W(t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],c=t[5],s=t[6],f=t[7],l=t[8],d=t[9],h=t[10],m=t[11],v=t[12],p=t[13],M=t[14],g=t[15],b=n[0],w=n[1],E=n[2],R=n[3],T=n[4],x=n[5],A=n[6],_=n[7],P=n[8],y=n[9],L=n[10],S=n[11],O=n[12],F=n[13],D=n[14],I=n[15];return Math.abs(r-b)<=e.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(o-w)<=e.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-E)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-R)<=e.EPSILON*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(u-T)<=e.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-x)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(s-A)<=e.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(f-_)<=e.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(l-P)<=e.EPSILON*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(d-y)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(y))&&Math.abs(h-L)<=e.EPSILON*Math.max(1,Math.abs(h),Math.abs(L))&&Math.abs(m-S)<=e.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(v-O)<=e.EPSILON*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(p-F)<=e.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(M-D)<=e.EPSILON*Math.max(1,Math.abs(M),Math.abs(D))&&Math.abs(g-I)<=e.EPSILON*Math.max(1,Math.abs(g),Math.abs(I))}var Q=m,Z=k},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const e=r(2),o=r(1);function a(t,n,r){const e=t.createShader(n);return e?(t.shaderSource(e,r),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(console.log(r),console.warn(t.getShaderInfoLog(e)),t.deleteShader(e),null)):null}function i(t,n,r){const e=t.createBuffer();return t.bindBuffer(n,e),t.bufferData(n,r,t.STATIC_DRAW),e}n.loadTexture=async function(t,n){const r=await new Promise((t,r)=>{const e=new Image;e.src=n,e.onload=(()=>t(e)),e.onerror=r}),e=t.createTexture(),o=t=>0==(t&t-1);return t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r),o(r.width)&&o(r.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR)),e},n.createProgram=function(t,n,r){const e=a(t,t.VERTEX_SHADER,n),o=a(t,t.FRAGMENT_SHADER,r),i=t.createProgram();if(!i||!e||!o)throw new Error("Failed to create shader program");if(t.attachShader(i,e),t.attachShader(i,o),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw console.warn(t.getProgramInfoLog(i)),new Error("Can not creat program");const u={},c={},s=t.getProgramParameter(i,t.ACTIVE_ATTRIBUTES),f=t.getProgramParameter(i,t.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){const r=t.getActiveAttrib(i,n).name;u[r]=t.getAttribLocation(i,r)}for(let n=0;n<f;n++){const r=t.getActiveUniform(i,n).name;c[r]=t.getUniformLocation(i,r)}return{program:i,uniforms:c,attributes:u,gl:t}},n.createMatrices=function(t){const n=e.create(),r=e.create(),a=e.create();e.perspective(n,Math.PI/4,t.aspect,.1,t.far||2e3);const i=o.clone(t.camera.position),u=o.clone(t.camera.center);return t.flip&&(u[2]=-u[2],i[2]=-i[2]),e.lookAt(r,i,u,[0,0,1]),{model:a,projection:n,view:r}},n.createBuffer=i,n.bindBuffer=function(t,n,r,e){t.bindBuffer(t.ARRAY_BUFFER,n),t.vertexAttribPointer(r,e,t.FLOAT,!1,0,0),t.enableVertexAttribArray(r)},n.bindArraysToBuffers=function(t,n){const{arrays:r,textures:e={},framebuffers:o={}}=n;return{buffers:{position:i(t,t.ARRAY_BUFFER,new Float32Array(r.position)),colors:i(t,t.ARRAY_BUFFER,new Float32Array(r.colors)),indices:i(t,t.ELEMENT_ARRAY_BUFFER,new Uint16Array(r.indices)),normal:i(t,t.ARRAY_BUFFER,new Float32Array(r.normals)),texture:i(t,t.ARRAY_BUFFER,new Float32Array(r.texture))},textures:e,framebuffers:o,size:r.indices.length}},n.createFramebufferAndTexture=function(t,n,r){const e=t.createTexture(),o=t.createFramebuffer(),a=t.createRenderbuffer();return t.bindFramebuffer(t.FRAMEBUFFER,o),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,r,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.bindRenderbuffer(t.RENDERBUFFER,a),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,a),t.bindFramebuffer(t.FRAMEBUFFER,null),[e,o]},n.inRange=function(t,n,r){return t<n?n:t>r?r:t}},function(t,n,r){"use strict";var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const o=r(1),a=r(2),i=r(3),u=e(r(14)),c=e(r(15)),{cos:s,sin:f,tan:l,PI:d}=Math;function h(t){return function(n){const{gl:r,program:e,sun:o}=t,{state:u,aspect:c,flip:s=!1}=n,{projection:f,model:l,view:d}=i.createMatrices({camera:u.camera,aspect:c,flip:s,far:2e3});a.translate(l,l,u.camera.position),a.translate(l,l,[0,0,-170]),a.scale(l,l,[1e3,1e3,1e3]),r.useProgram(e.program),i.bindBuffer(r,o.buffers.position,e.attributes.position,3),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,o.buffers.indices),r.uniform1f(e.uniforms.domeRadius,1e3),r.uniform3fv(e.uniforms.sunPosition,u.sky.sunPosition),r.uniform3fv(e.uniforms.cameraPosition,u.camera.position),r.uniformMatrix4fv(e.uniforms.projection,!1,f),r.uniformMatrix4fv(e.uniforms.view,!1,d),r.uniformMatrix4fv(e.uniforms.model,!1,l),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.drawElements(r.TRIANGLES,o.size,r.UNSIGNED_SHORT,0),r.disable(r.BLEND)}}function m(){const t=50,n=[],r=[];for(let e=0;e<=t;e++){const o=d/t*e-d/2;for(let a=0;a<t;a++){const i=2*d/t*a,u=s(i)*s(o),c=f(i)*s(o),l=f(o),h=e*t+a;n.push(u,c,l),e!==t&&(49===a?r.push(e*t,h+t,h,h+t,h+1,e*t):r.push(h,h+1,h+t,h+1,h+t,h+t+1))}}return{position:n,indices:r}}function v(t){return("00"+t).slice(-2)}n.createSky=function(t){const n=i.createProgram(t,u.default,c.default);return{render:h({gl:t,sun:i.bindArraysToBuffers(t,{arrays:m()}),program:n})}},n.sunTimeToString=function(t){const n=Math.ceil(t/60/1e3),r=n%60;return`${v(Math.floor(n/60))}:${v(r)}`},n.getSunPosition=function(t){const n=t%864e5,r=function(t){return l(-4.83049e-16*t*t+4.21414e-8*t-.420437)}(n),e=function(t){return 7.344052639206152e-8*t-.1829595519336553}(n),a=s(r)*s(e),u=s(r)*f(e),c=f(r),d=o.fromValues(a,-u,c),h=o.fromValues(1,1,1),m=o.create(),v=i.inRange(2*c,0,1);return o.negate(m,d),o.scale(h,h,v),{sunPosition:o.fromValues(a,-u,c),directionalLightColor:h,directionalLightVector:m}}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const e=r(6),o=r(9),a=r(11),i=r(4),u=r(16);window.addEventListener("load",async function(){const t=document.querySelector("canvas");t.width=s,t.height=f;const n=t.getContext("experimental-webgl");if(!n)return void console.warn("Can not create webgl context");const r=await e.createTerrain(n,{heatmap:"heightmaps/terrain4.png",height:500/d,chunkSize:20/d,baseLevel:50/d}),c=await a.createWater(n,{size:l}),h=i.createSky(n),m=u.getInitialState(),{emitter:v}=o.initControls(t);v.on("visability",t=>m.app.active=t.visability).on("toggleRenderWater",()=>u.toggle(m,"water","visible")).on("toggleRenderTerrain",()=>u.toggle(m,"terrain","visible")).on("toggleRefraction",()=>u.toggle(m,"water","useRefraction")).on("toggleReflection",()=>u.toggle(m,"water","useReflection")).on("toggleRenderSun",()=>u.toggle(m,"sky","visible")).on("toggleAutoSunMove",()=>u.toggle(m,"sky","autoSunMove")).on("zoom",t=>u.zoom(m,t.dy)).on("moveCamera",t=>u.moveCamera(m,t)).on("rotateCamera",t=>u.rorateCamera(m,t.dx/500,t.dy)).on("moveSun",t=>u.moveSun(m,t.ds)),function t(){if(!m.app.active)return requestAnimationFrame(t);u.updateWaterTime(m);u.autoMoveSun(m,3e5);!function(t){const n=s/f,r=[l,l,100],{gl:e,terrain:o,water:a,sky:i,state:u}=t,c={state:u,terrainScale:r,aspect:n};e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),u.water.visible&&(a.updateReflectionTexture(()=>{u.terrain.visible&&o.render(Object.assign({},c,{clipDirection:-1,flip:!0})),u.sky.visible?i.render(Object.assign({},c,{flip:!0})):e.clearColor(.53,.8,.98,1)}),a.updateRefractionTexture(()=>{u.terrain.visible&&o.render(Object.assign({},c,{clipDirection:1}))}));e.viewport(0,0,s,f),u.terrain.visible&&o.render(c);u.water.visible&&a.render(c);u.sky.visible&&i.render(c)}({gl:n,state:m,terrain:r,water:c,sky:h});requestAnimationFrame(t)}()});const c=Math.min(window.innerWidth,window.innerHeight,1024),s=c,f=c,l=2*c,d=4},function(t,n,r){"use strict";var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const o=r(2),a=r(1),i=r(3),u=e(r(7)),c=e(r(8));function s(t){return function(n){const{gl:r,terrain:e,program:a}=t,{state:u,aspect:c,clipDirection:s=0,clipLevel:f=0,flip:l=!1,terrainScale:d=[1,1,1]}=n,{projection:h,model:m,view:v}=i.createMatrices({camera:u.camera,aspect:c,flip:l});o.scale(m,m,d),r.useProgram(a.program),i.bindBuffer(r,e.buffers.position,a.attributes.position,3),i.bindBuffer(r,e.buffers.normal,a.attributes.normal,3),i.bindBuffer(r,e.buffers.colors,a.attributes.colors,4),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e.buffers.indices),r.uniformMatrix4fv(a.uniforms.projection,!1,h),r.uniformMatrix4fv(a.uniforms.model,!1,m),r.uniformMatrix4fv(a.uniforms.view,!1,v),r.uniform3fv(a.uniforms.directionalLightVector,u.light.direction),r.uniform3fv(a.uniforms.directionalLightColor,u.light.color),r.uniform1f(a.uniforms.clipDirection,s),r.uniform1f(a.uniforms.clipLevel,f),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.drawElements(r.TRIANGLES,e.size,r.UNSIGNED_SHORT,0),r.disable(r.BLEND)}}n.createTerrain=async function(t,n){const r=await async function(t,n,r,e=0){const o=document.createElement("canvas"),i=await function(t){return new Promise((n,r)=>{const e=new Image;e.src=t,e.onload=(()=>n(e)),e.onerror=r})}(t);o.width=i.width,o.height=i.height;const u=o.getContext("2d");if(!u)throw new Error("Can not create 2d context");u.drawImage(i,0,0);const{data:c}=u.getImageData(0,0,i.width,i.height),s=new Uint32Array(c),f=256/n,l=Math.floor(i.width/r),d=Math.floor(i.height/r),h=new Float32Array(l*d);let m=0;for(let t=0;t<d;t++)for(let n=0;n<l;n++){let e=0;for(let o=0;o<r;o++)for(let a=0;a<r;a++)e+=s[4*(t*r*i.width+n*r+o*r+a)];const o=e/r/r/f;h[t*l+n]=o,m<o&&(m=o)}const v=[],p=[],M=[],g=[],b=[];for(let t=0;t<d;t++)for(let n=0;n<l;n++){const r=t*l+n,o=h[r]/m;Number.isFinite(o)||console.log({i:t,j:n,c:o}),v.push(n/l-.5,t/d-.5,(h[r]-e)/m),M.push(o,o,o,1),t!==d-1&&n!==l-1&&p.push(r,r+l,r+1,r+1,r+l,r+l+1),b.push(n/l,t/d)}for(let t=0;t<v.length/3;t++){const n=l,r=d,e=t%n,o=~~(t/n),i=[e>0&&o>0&&[t-n,t-1,t],e+1<n&&o>0&&[t-n,t,t-n+1],e+1<n&&o>0&&[t-n+1,t,t+1],e>0&&o<r&&[t-1,t+n-1,t],e>0&&o<r&&[t,t+n-1,t+n],e+1<n&&o<r&&[t,t+n,t+1]],u=[],c=[];for(let t=0;t<i.length;t++){const n=i[t];for(let t=0;t<3;t++)n&&u.push(v[3*n[t]],v[3*n[t]+1],v[3*n[t]+2])}for(let t=0;t<u.length/9;t++){const n=a.fromValues(u[9*t+0],u[9*t+1],u[9*t+2]),r=a.fromValues(u[9*t+3],u[9*t+4],u[9*t+5]),e=a.fromValues(u[9*t+6],u[9*t+7],u[9*t+8]);a.subtract(r,r,n),a.subtract(e,e,n),a.cross(r,r,e),a.normalize(r,r),c.push(r)}const s=a.fromValues(0,0,0);for(let t=0;t<c.length;t++)a.add(s,s,c[t]);a.normalize(s,s),g.push(s[0],s[1],s[2])}return{position:v,indices:p,colors:M,normals:g,texture:b}}(n.heatmap,n.height,n.chunkSize,n.baseLevel),e=i.createProgram(t,u.default,c.default);return{render:s({terrain:i.bindArraysToBuffers(t,{arrays:r}),gl:t,program:e})}}},function(t,n){t.exports="attribute vec4 position;\r\nattribute vec3 normal;\r\nattribute vec4 colors;\r\n\r\nuniform mat4 view;\r\nuniform mat4 model;\r\nuniform mat4 projection;\r\nuniform vec3 directionalLightVector;\r\nuniform vec3 directionalLightColor;\r\nuniform float clipDirection;\r\nuniform float clipLevel;\r\n\r\nvarying highp vec3 vLighting;\r\nvarying lowp vec2 vTextureCoord;\r\nvarying lowp vec4 fragmentColor;\r\nvarying float shouldClip;\r\n\r\nvoid main() {\r\n  highp vec3 ambientLight = vec3(0.1, 0.1, 0.1);\r\n  highp vec3 directionalVector = normalize(directionalLightVector);\r\n\r\n  highp float directional = max(dot(normal, directionalVector), 0.0);\r\n  vLighting = ambientLight + (directionalLightColor * directional);\r\n\r\n  gl_Position = projection * view * model * position;\r\n\r\n  fragmentColor = colors;\r\n  if (clipDirection == 1.0) {\r\n    shouldClip = position.z > clipLevel ? 1.0 : 0.0;\r\n  } else if (clipDirection == -1.0) {\r\n    shouldClip = position.z < clipLevel ? 1.0 : 0.0;\r\n  } else {\r\n    shouldClip = 0.0;\r\n  }\r\n}"},function(t,n){t.exports="varying highp vec3 vLighting;\r\nvarying highp float shouldClip;\r\nvarying lowp vec4 fragmentColor;\r\n\r\nconst lowp vec4 nothingColor = vec4(0.0, 0.0, 0.0, 0.0);\r\nconst lowp vec4 grassColor = vec4(0.12, 0.43, 0.02, 1.0);\r\nconst lowp vec4 snowColor = vec4(1.0);\r\nconst lowp vec4 groundColor = vec4(0.85, 0.84, 0.79, 1.0);\r\n\r\nvoid main() {\r\n  if (shouldClip == 1.0) {\r\n    discard;\r\n  }\r\n  lowp float x = fragmentColor.x;\r\n  lowp float groundGrassMixFactor = smoothstep(0.1, 0.2, x);\r\n  lowp float grassSnowMixFactor = smoothstep(0.7, 0.8, x);\r\n  lowp float nothingGroundMixFactor = smoothstep(0.00, 0.015, x);\r\n  lowp vec4 color = mix(groundColor, grassColor, groundGrassMixFactor);\r\n  color = mix(color, snowColor, grassSnowMixFactor);\r\n  color = mix(nothingColor, color, nothingGroundMixFactor);\r\n\r\n  gl_FragColor = vec4(color.rgb * vLighting, color.a);\r\n}\r\n"},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const e=r(10);n.initControls=function(t){let n=!1;const r=new Set,o=new e.EventEmitter,a=()=>{let t=0,n=0,e=0,i=0;r.has("w")&&n++,r.has("s")&&n--,r.has("a")&&t++,r.has("d")&&t--,r.has("e")&&e++,r.has("q")&&e--,r.has("j")&&i--,r.has("k")&&i++,i&&o.emit("moveSun",{sunTime:i}),(t||n||e)&&o.emit("moveCamera",{left:t,forward:n,up:e}),requestAnimationFrame(a)},i=t=>{switch(t.key){case"1":o.emit("toggleRenderTerrain");break;case"2":o.emit("toggleRenderWater");break;case"3":o.emit("toggleRefraction");break;case"4":o.emit("toggleReflection");break;case"5":o.emit("toggleRenderSun");break;case"6":o.emit("toggleAutoSunMove");break;default:r.add(t.key)}},u=t=>{const{deltaY:n}=t;n&&(o.emit("zoom",{dy:n/Math.abs(n)*10}),t.preventDefault())},c=t=>{r.delete(t.key)},s=()=>{n=!0},f=()=>{n=!1},l=t=>{const{movementX:r,movementY:e}=t;n&&o.emit("rotateCamera",{dx:-r,dy:e})},d=t=>{t.preventDefault()},h=()=>{o.emit("visability",{visible:!0})},m=()=>{r.clear(),o.emit("visability",{visible:!1})};return a(),t.addEventListener("wheel",u),t.addEventListener("mousedown",s),t.addEventListener("contextmenu",d),window.addEventListener("mouseup",f),window.addEventListener("mousemove",l),window.addEventListener("keypress",i),window.addEventListener("keyup",c),window.addEventListener("focus",h),window.addEventListener("blur",m),{emitter:o,tearDown:()=>{o.removeAllListeners(),t.removeEventListener("wheel",u),t.removeEventListener("mousedown",s),t.removeEventListener("contextmenu",d),window.removeEventListener("mouseup",f),window.removeEventListener("mousemove",l),window.removeEventListener("keypress",i),window.removeEventListener("keyup",c),window.removeEventListener("focus",h),window.removeEventListener("blur",m)}}}},function(t,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function e(t){return"function"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var n,r,i,u,c,s;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((n=arguments[1])instanceof Error)throw n;var f=new Error('Uncaught, unspecified "error" event. ('+n+")");throw f.context=n,f}if(a(r=this._events[t]))return!1;if(e(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(o(r))for(u=Array.prototype.slice.call(arguments,1),i=(s=r.slice()).length,c=0;c<i;c++)s[c].apply(this,u);return!0},r.prototype.addListener=function(t,n){var i;if(!e(n))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,e(n.listener)?n.listener:n),this._events[t]?o(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,n){if(!e(n))throw TypeError("listener must be a function");var r=!1;function o(){this.removeListener(t,o),r||(r=!0,n.apply(this,arguments))}return o.listener=n,this.on(t,o),this},r.prototype.removeListener=function(t,n){var r,a,i,u;if(!e(n))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=(r=this._events[t]).length,a=-1,r===n||e(r.listener)&&r.listener===n)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,n);else if(o(r)){for(u=i;u-- >0;)if(r[u]===n||r[u].listener&&r[u].listener===n){a=u;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,n)}return this},r.prototype.removeAllListeners=function(t){var n,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events={},this}if(e(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?e(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var n=this._events[t];if(e(n))return 1;if(n)return n.length}return 0},r.listenerCount=function(t,n){return t.listenerCount(n)}},function(t,n,r){"use strict";var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(n,"__esModule",{value:!0});const o=r(2),a=r(3),i=e(r(12)),u=e(r(13));function c(t){return function(n){const{gl:r,water:e,size:o}=t;r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffers.reflection),r.viewport(0,0,o,o),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n(),r.bindFramebuffer(r.FRAMEBUFFER,null)}}function s(t){return function(n){const{gl:r,water:e,size:o}=t;r.bindFramebuffer(r.FRAMEBUFFER,e.framebuffers.refraction),r.viewport(0,0,o,o),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),n(),r.bindFramebuffer(r.FRAMEBUFFER,null)}}function f(t){const{size:n,program:r,gl:e,water:i}=t;return e.useProgram(r.program),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.textures.dudv),e.uniform1i(r.uniforms.dudvTexture,0),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,i.textures.normalMap),e.uniform1i(r.uniforms.normalMapTexture,1),e.activeTexture(e.TEXTURE2),e.bindTexture(e.TEXTURE_2D,i.textures.refraction),e.uniform1i(r.uniforms.refractionTexture,2),e.activeTexture(e.TEXTURE3),e.bindTexture(e.TEXTURE_2D,i.textures.reflection),e.uniform1i(r.uniforms.reflectionTexture,3),function(t){const{state:u,aspect:c}=t,{projection:s,model:f,view:l}=a.createMatrices({camera:u.camera,aspect:c});o.scale(f,f,[n,n,1]),e.useProgram(r.program),a.bindBuffer(e,i.buffers.position,r.attributes.position,3),a.bindBuffer(e,i.buffers.texture,r.attributes.textureCoord,2),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.buffers.indices),e.uniform1f(r.uniforms.dudvOffset,u.water.time/1e3*.03%1),e.uniform1i(r.uniforms.useRefraction,Number(u.water.useRefraction)),e.uniform1i(r.uniforms.useReflection,Number(u.water.useReflection)),e.uniform3fv(r.uniforms.cameraPosition,u.camera.position),e.uniform3fv(r.uniforms.directionalLightVector,u.light.direction),e.uniform3fv(r.uniforms.directionalLightColor,u.light.color),e.uniformMatrix4fv(r.uniforms.projection,!1,s),e.uniformMatrix4fv(r.uniforms.model,!1,f),e.uniformMatrix4fv(r.uniforms.view,!1,l),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.drawElements(e.TRIANGLES,i.size,e.UNSIGNED_SHORT,0),e.disable(e.BLEND)}}n.createWater=async function(t,n){const{size:r}=n,e=await a.loadTexture(t,"textures/dudvmap.png"),o=await a.loadTexture(t,"textures/normalmap.png"),[l,d]=a.createFramebufferAndTexture(t,r,r),[h,m]=a.createFramebufferAndTexture(t,r,r),v={position:[-.5,-.5,0,.5,-.5,0,-.5,.5,0,.5,.5,0],indices:[0,2,1,1,2,3],texture:[0,0,1,0,0,1,1,1]},p={gl:t,program:a.createProgram(t,i.default,u.default),size:r,water:a.bindArraysToBuffers(t,{arrays:v,framebuffers:{refraction:d,reflection:m},textures:{dudv:e,normalMap:o,refraction:l,reflection:h}})};return{render:f(p),updateReflectionTexture:c(p),updateRefractionTexture:s(p)}}},function(t,n){t.exports="attribute vec4 position;\r\nattribute vec2 textureCoord;\r\n\r\nuniform mat4 view;\r\nuniform mat4 model;\r\nuniform mat4 projection;\r\nuniform lowp vec3 cameraPosition;\r\n\r\nvarying highp vec2 vTextureCoord;\r\nvarying highp vec4 clipSpace;\r\nvarying highp vec3 fromFragmentToCamera;\r\nvarying lowp float reflectionYOffset;\r\n\r\nconst lowp float tiling = 10.0;\r\n\r\nvoid main() {\r\n    vec4 worldPosition = model * position;\r\n    gl_Position = clipSpace = projection * view * worldPosition;\r\n\r\n    fromFragmentToCamera = cameraPosition - worldPosition.xyz;\r\n    vTextureCoord = textureCoord * tiling;\r\n}"},function(t,n){t.exports="varying lowp vec2 vTextureCoord;\r\nvarying lowp vec4 clipSpace;\r\nvarying lowp vec3 fromFragmentToCamera;\r\n\r\nuniform sampler2D dudvTexture;\r\nuniform sampler2D normalMapTexture;\r\nuniform sampler2D refractionTexture;\r\nuniform sampler2D reflectionTexture;\r\nuniform lowp float dudvOffset;\r\nuniform int useRefraction;\r\nuniform int useReflection;\r\nuniform lowp vec3 directionalLightVector;\r\nuniform lowp vec3 directionalLightColor;\r\n\r\nconst lowp float waterDistortionStrenth = 0.02;\r\nconst lowp float fresnelStrength = 1.5;\r\nconst lowp float waterReflectivity = 0.5;\r\nconst lowp vec4 shallowWaterColor =  vec4(0.0, 0.1, 0.3, 1.0);\r\n// const lowp vec4 deepWaterColor = vec4(0.0, 0.1, 0.2, 1.0);\r\nconst lowp float shineDamper = 20.0;\r\n\r\nvoid main() {\r\n    // distortion\r\n    lowp vec2 distortedTexCoords = texture2D(dudvTexture, vec2(vTextureCoord.x, vTextureCoord.y + dudvOffset)).xy * 0.1;\r\n    distortedTexCoords = vTextureCoord + vec2(distortedTexCoords.x + dudvOffset, distortedTexCoords.y);\r\n\r\n    lowp vec2 totalDistortion = (texture2D(dudvTexture, distortedTexCoords).xy * 2.0 - 1.0) * waterDistortionStrenth;\r\n\r\n    // base refract/reflect texture coordinates\r\n    lowp vec2 ndc = (clipSpace.xy / clipSpace.w) / 2.0 + 0.5;\r\n    lowp vec2 refractTexCoords = vec2(ndc.x, +ndc.y);\r\n    lowp vec2 reflectTexCoords = vec2(ndc.x, 1.0-ndc.y);\r\n\r\n\r\n    // refractive factor\r\n    lowp vec3 toCamera = normalize(fromFragmentToCamera);\r\n    lowp vec4 normalMapColor = texture2D(normalMapTexture, distortedTexCoords);\r\n    lowp vec3 normal = normalMapColor.xyz * 2.0 - 1.0;\r\n    normal = normalize(normal);\r\n    lowp float refractiveFactor = dot(toCamera, normal);\r\n    refractiveFactor = pow(refractiveFactor, fresnelStrength);\r\n\r\n    // puting all together\r\n    refractTexCoords += totalDistortion;\r\n    reflectTexCoords += totalDistortion;\r\n    // refractTexCoords = clamp(refractTexCoords, 0.001, 0.999);\r\n    // reflectTexCoords.x = clamp(reflectTexCoords.x, 0.001, 0.999);\r\n    // reflectTexCoords.y = clamp(reflectTexCoords.y, 0.001, 0.999);\r\n\r\n    // lighs\r\n    lowp vec3 reflectedLight = reflect(normalize(directionalLightVector), normal);\r\n    lowp float specular = max(dot(reflectedLight, toCamera), 0.0);\r\n    specular = pow(specular, shineDamper);\r\n    lowp vec3 specularHighlights = directionalLightColor * specular * waterReflectivity;\r\n\r\n    // color\r\n    lowp vec4 refractColor = texture2D(refractionTexture, refractTexCoords);\r\n    lowp vec4 reflectColor = texture2D(reflectionTexture, reflectTexCoords);\r\n\r\n    if (useReflection == 1 && useRefraction == 1) {\r\n      gl_FragColor = mix(reflectColor, refractColor, refractiveFactor);\r\n    } else if (useReflection == 1) {\r\n      gl_FragColor = reflectColor;\r\n    } else if (useRefraction == 1) {\r\n      gl_FragColor = refractColor;\r\n    }\r\n    gl_FragColor = mix(gl_FragColor, shallowWaterColor, 0.2);\r\n\r\n    gl_FragColor = gl_FragColor + vec4(specularHighlights, 1.0);\r\n}\r\n"},function(t,n){t.exports="attribute vec4 position;\r\n\r\nuniform lowp mat4 view;\r\nuniform lowp mat4 model;\r\nuniform lowp mat4 projection;\r\n\r\nvarying lowp vec4 worldPosition;\r\n\r\nvoid main() {\r\n    worldPosition = position;\r\n    gl_Position = projection * view * model * worldPosition;\r\n}"},function(t,n){t.exports="uniform lowp float domeRadius;\r\nuniform lowp vec3 sunPosition;\r\nuniform lowp vec3 cameraPosition;\r\n\r\nconst lowp float PI = 3.1415926535897932384626433832795;\r\nconst lowp float PI_2 = 1.57079632679489661923;\r\nconst lowp float si = 22.0; // sun intencity\r\n\r\nconst lowp float earthRadius = 6371e3;\r\nconst lowp float atmosphereRadius = 6471e3;\r\nconst lowp float rsh = 8.0e3; // Rayleigh scale height\r\nconst lowp float msh = 1.2e3; // Mie scale height\r\n\r\nconst lowp vec3 rsc = vec3(5.5e-6, 13.0e-6, 22.4e-6); // Rayleigh scattering coefficient\r\nconst lowp float msc = 21e-6; // Mie scattering coefficient\r\n\r\nconst lowp float gr = 0.0; // Rayleigh simetry constant\r\nconst lowp float gm = 0.758; // Mie simetry constant\r\n\r\nvarying lowp vec4 worldPosition;\r\nvarying lowp vec4 sunView;\r\n\r\nconst int samples = 5;\r\n\r\n// https://developer.nvidia.com/gpugems/GPUGems2/gpugems2_chapter16.html\r\nlowp float phase(\r\n    lowp float g,\r\n    lowp float a\r\n) {\r\n    lowp float g2 = g * g;\r\n    return 3.0 * (1.0 - g2)  * (1.0 + a * a) / 8.0 / PI / (2.0 + g2) / pow(1.0 + g2 - 2.0 * g * a, 1.5);\r\n}\r\n\r\nlowp vec3 translate(lowp vec3 dir) {\r\n    lowp float r1 = earthRadius;\r\n    lowp float r2 = atmosphereRadius;\r\n\r\n    lowp float al0 = asin(dir.z);\r\n    lowp float az0 = atan(dir.y / dir.x);\r\n    if (dir.x < 0.0) {\r\n        az0 += PI;\r\n    }\r\n    lowp float al1 = asin(r1 / r2);\r\n    lowp float al2 = al1 + (1.0 - al1 / PI_2) * al0;\r\n    return vec3(\r\n        cos(al2) * cos(az0),\r\n        cos(al2) * sin(az0),\r\n        sin(al2)\r\n    );\r\n}\r\n\r\n// http://viclw17.github.io/2018/07/16/raytracing-ray-sphere-intersection/\r\nlowp float dtse(\r\n    lowp vec3 origin,\r\n    lowp vec3 direction,\r\n    lowp float radius\r\n) {\r\n    lowp vec3 center = vec3(0.0); // could be used as parameter\r\n    lowp vec3 oc = origin - center;\r\n    lowp float a = dot(direction, direction);\r\n    lowp float b = 2.0 * dot(direction, oc);\r\n    lowp float c = dot(oc, oc) - radius * radius;\r\n    lowp float d = b * b - 4.0 * a * c;\r\n    if (d < 0.0) {\r\n        return -1.0;\r\n    }\r\n    lowp float qd = sqrt(d);\r\n    lowp float t = (-qd - b) / 2.0 / a;\r\n    if (t >= 0.0) {\r\n        return t;\r\n    }\r\n    t = (qd - b) / 2.0 / a;\r\n    if (t > 0.0) {\r\n        return t;\r\n    }\r\n    return -1.0;\r\n}\r\n\r\nlowp vec3 getSunColor(\r\n    lowp vec3 sun,\r\n    lowp vec3 position\r\n) {\r\n    lowp float angle = acos(dot(\r\n        sun,\r\n        position\r\n    ));\r\n    return vec3(1.0) * (1.0 - smoothstep(0.0, 1.0, angle * 20.0));\r\n}\r\n\r\nvoid main() {\r\n    lowp vec3 camera = vec3(0.0, 0.0, earthRadius);\r\n    lowp vec3 world = normalize(worldPosition.xyz);\r\n    lowp vec3 position = translate(world) * atmosphereRadius;\r\n    lowp vec3 ray = normalize(position - camera);\r\n    lowp vec3 sun = normalize(sunPosition);\r\n\r\n    lowp float far = dtse(camera, ray, atmosphereRadius);\r\n\r\n    lowp float lightAngle = dot(ray, sun);\r\n    lowp float rshFactor = phase(gr, lightAngle);\r\n    lowp float mieFactor = phase(gm, lightAngle);\r\n\r\n    lowp float sampleSize = far / float(samples);\r\n    lowp vec3 samplePoint = camera + ray * sampleSize * 0.5;\r\n    lowp float rshOpticalDepth = 0.0;\r\n    lowp float mieOpticalDepth = 0.0;\r\n    lowp vec3 rshAccumulated = vec3(0.0);\r\n    lowp vec3 mieAccumulated = vec3(0.0);\r\n\r\n    for (int i = 0; i < samples; i ++) {\r\n        lowp float far2 = dtse(\r\n            samplePoint,\r\n            sun,\r\n            atmosphereRadius\r\n        );\r\n        lowp float sampleSize2 = far2 / float(samples);\r\n        lowp vec3 samplePoint2 = samplePoint + sampleSize2 / 2.0 * sun;\r\n        lowp float rshOpticalDepth2 = 0.0;\r\n        lowp float mieOpticalDepth2 = 0.0;\r\n\r\n        for (int j = 0; j < samples; j ++) {\r\n            lowp float height = length(samplePoint2) - earthRadius;\r\n            lowp float rshOpticalDepthStep = exp(-height / rsh) * sampleSize2;\r\n            lowp float mieOpticalDepthStep = exp(-height / msh) * sampleSize2;\r\n\r\n            rshOpticalDepth2 += rshOpticalDepthStep;\r\n            mieOpticalDepth2 += mieOpticalDepthStep;\r\n\r\n            samplePoint2 += sun * sampleSize2;\r\n        }\r\n\r\n        lowp float height = length(samplePoint) - earthRadius;\r\n        lowp float rshOpticalDepthStep = exp(-height / rsh) * sampleSize;\r\n        lowp float mieOpticalDepthStep = exp(-height / msh) * sampleSize;\r\n\r\n        rshOpticalDepth += rshOpticalDepthStep;\r\n        mieOpticalDepth += mieOpticalDepthStep;\r\n\r\n        lowp vec3 outScattering = exp(\r\n            -rsc * (rshOpticalDepth + rshOpticalDepth2)\r\n            -msc * (mieOpticalDepth + mieOpticalDepth2)\r\n        );\r\n\r\n        rshAccumulated += rshOpticalDepthStep * outScattering;\r\n        mieAccumulated += mieOpticalDepthStep * outScattering;\r\n\r\n        samplePoint += ray * sampleSize;\r\n    }\r\n\r\n    lowp vec3 color = vec3(0.0);\r\n\r\n    // mieAccumulated *= 0.0;\r\n    // rshAccumulated *= 0.5;\r\n    lowp vec3 sunColor = getSunColor(sun, world);\r\n    lowp vec3 totalLight = si * (\r\n        rshFactor * rsc * rshAccumulated +\r\n        mieFactor * msc * mieAccumulated\r\n    );\r\n    // color += totalLight;\r\n    color += 1.0 - exp(-1.0 * totalLight);\r\n    color += sunColor;\r\n\r\n    gl_FragColor = vec4(color, 1.0);\r\n}\r\n"},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});const e=r(17),o=r(3),a=r(4),i={app:{active:!0},camera:{center:e.vec3.fromValues(106,-461,93),position:e.vec3.fromValues(-341,106,169)},terrain:{visible:!0},water:{start:Date.now(),time:0,visible:!0,useReflection:!0,useRefraction:!0},light:{direction:e.vec3.fromValues(0,0,0),color:e.vec3.fromValues(0,0,0)},sky:{dayTime:36e5,visible:!0,sunPosition:e.vec3.fromValues(0,0,0),autoSunMove:!0}};n.getInitialState=(()=>i),n.toggle=((t,n,r)=>{t[n][r]=!t[n][r]}),n.zoom=((t,n)=>{const{position:r,center:a}=t.camera,i=e.vec3.create(),u=e.vec3.distance(a,r),c=o.inRange(u+n,50,1e3);e.vec3.sub(i,r,a),e.vec3.scale(i,i,c/u),e.vec3.add(r,a,i)}),n.moveCamera=((t,n)=>{const{position:r,center:o}=t.camera,a=e.vec3.create(),i=e.vec3.create(),u=e.vec3.create();e.vec3.sub(a,o,r),e.vec3.rotateZ(i,a,[0,0,1],Math.PI/2),i[2]=0,1===n.forward&&e.vec3.add(u,u,a),-1===n.forward&&e.vec3.sub(u,u,a),1===n.left&&e.vec3.add(u,u,i),-1===n.left&&e.vec3.sub(u,u,i),e.vec3.normalize(u,u),e.vec3.add(u,u,[0,0,n.up]),e.vec3.scale(u,u,6),e.vec3.add(r,r,u),e.vec3.add(o,o,u)}),n.rorateCamera=((t,n,r)=>{const{position:o,center:a}=t.camera,i=e.vec3.create();e.vec3.sub(i,a,o);const u=e.vec3.length(i);e.vec3.rotateZ(i,i,[0,0,0],n),i[2]-=r,e.vec3.normalize(i,i),e.vec3.scale(i,i,u),e.vec3.add(a,o,i)}),n.moveSun=((t,n)=>{let r=t.sky.dayTime+n;r<0?r+=864e5:r>864e5&&(r-=864e5),u(t,r)}),n.autoMoveSun=((t,r)=>{t.sky.autoSunMove&&n.moveSun(t,r)}),n.updateWaterTime=(t=>{t.water.time=Date.now()-t.water.start});const u=(t,n)=>{const{sunPosition:r,directionalLightColor:e,directionalLightVector:o}=a.getSunPosition(n);t.sky.dayTime=n,t.sky.sunPosition=r,t.light.color=e,t.light.direction=o}},function(t,n,r){"use strict";r.r(n);var e={};r.r(e),r.d(e,"create",function(){return l}),r.d(e,"clone",function(){return d}),r.d(e,"copy",function(){return h}),r.d(e,"identity",function(){return m}),r.d(e,"fromValues",function(){return v}),r.d(e,"set",function(){return p}),r.d(e,"transpose",function(){return M}),r.d(e,"invert",function(){return g}),r.d(e,"adjoint",function(){return b}),r.d(e,"determinant",function(){return w}),r.d(e,"multiply",function(){return E}),r.d(e,"rotate",function(){return R}),r.d(e,"scale",function(){return T}),r.d(e,"fromRotation",function(){return x}),r.d(e,"fromScaling",function(){return A}),r.d(e,"str",function(){return _}),r.d(e,"frob",function(){return P}),r.d(e,"LDU",function(){return y}),r.d(e,"add",function(){return L}),r.d(e,"subtract",function(){return S}),r.d(e,"exactEquals",function(){return O}),r.d(e,"equals",function(){return F}),r.d(e,"multiplyScalar",function(){return D}),r.d(e,"multiplyScalarAndAdd",function(){return I}),r.d(e,"mul",function(){return C}),r.d(e,"sub",function(){return N});var o={};r.r(o),r.d(o,"create",function(){return Y}),r.d(o,"clone",function(){return q}),r.d(o,"copy",function(){return U}),r.d(o,"identity",function(){return B}),r.d(o,"fromValues",function(){return z}),r.d(o,"set",function(){return j}),r.d(o,"invert",function(){return V}),r.d(o,"determinant",function(){return k}),r.d(o,"multiply",function(){return X}),r.d(o,"rotate",function(){return G}),r.d(o,"scale",function(){return H}),r.d(o,"translate",function(){return W}),r.d(o,"fromRotation",function(){return Q}),r.d(o,"fromScaling",function(){return Z}),r.d(o,"fromTranslation",function(){return $}),r.d(o,"str",function(){return K}),r.d(o,"frob",function(){return J}),r.d(o,"add",function(){return tt}),r.d(o,"subtract",function(){return nt}),r.d(o,"multiplyScalar",function(){return rt}),r.d(o,"multiplyScalarAndAdd",function(){return et}),r.d(o,"exactEquals",function(){return ot}),r.d(o,"equals",function(){return at}),r.d(o,"mul",function(){return it}),r.d(o,"sub",function(){return ut});var a={};r.r(a),r.d(a,"create",function(){return ct}),r.d(a,"fromMat4",function(){return st}),r.d(a,"clone",function(){return ft}),r.d(a,"copy",function(){return lt}),r.d(a,"fromValues",function(){return dt}),r.d(a,"set",function(){return ht}),r.d(a,"identity",function(){return mt}),r.d(a,"transpose",function(){return vt}),r.d(a,"invert",function(){return pt}),r.d(a,"adjoint",function(){return Mt}),r.d(a,"determinant",function(){return gt}),r.d(a,"multiply",function(){return bt}),r.d(a,"translate",function(){return wt}),r.d(a,"rotate",function(){return Et}),r.d(a,"scale",function(){return Rt}),r.d(a,"fromTranslation",function(){return Tt}),r.d(a,"fromRotation",function(){return xt}),r.d(a,"fromScaling",function(){return At}),r.d(a,"fromMat2d",function(){return _t}),r.d(a,"fromQuat",function(){return Pt}),r.d(a,"normalFromMat4",function(){return yt}),r.d(a,"projection",function(){return Lt}),r.d(a,"str",function(){return St}),r.d(a,"frob",function(){return Ot}),r.d(a,"add",function(){return Ft}),r.d(a,"subtract",function(){return Dt}),r.d(a,"multiplyScalar",function(){return It}),r.d(a,"multiplyScalarAndAdd",function(){return Ct}),r.d(a,"exactEquals",function(){return Nt}),r.d(a,"equals",function(){return Yt}),r.d(a,"mul",function(){return qt}),r.d(a,"sub",function(){return Ut});var i={};r.r(i),r.d(i,"create",function(){return jt}),r.d(i,"clone",function(){return Vt}),r.d(i,"fromValues",function(){return kt}),r.d(i,"copy",function(){return Xt}),r.d(i,"set",function(){return Gt}),r.d(i,"add",function(){return Ht}),r.d(i,"subtract",function(){return Wt}),r.d(i,"multiply",function(){return Qt}),r.d(i,"divide",function(){return Zt}),r.d(i,"ceil",function(){return $t}),r.d(i,"floor",function(){return Kt}),r.d(i,"min",function(){return Jt}),r.d(i,"max",function(){return tn}),r.d(i,"round",function(){return nn}),r.d(i,"scale",function(){return rn}),r.d(i,"scaleAndAdd",function(){return en}),r.d(i,"distance",function(){return on}),r.d(i,"squaredDistance",function(){return an}),r.d(i,"length",function(){return un}),r.d(i,"squaredLength",function(){return cn}),r.d(i,"negate",function(){return sn}),r.d(i,"inverse",function(){return fn}),r.d(i,"normalize",function(){return ln}),r.d(i,"dot",function(){return dn}),r.d(i,"cross",function(){return hn}),r.d(i,"lerp",function(){return mn}),r.d(i,"random",function(){return vn}),r.d(i,"transformMat4",function(){return pn}),r.d(i,"transformQuat",function(){return Mn}),r.d(i,"zero",function(){return gn}),r.d(i,"str",function(){return bn}),r.d(i,"exactEquals",function(){return wn}),r.d(i,"equals",function(){return En}),r.d(i,"sub",function(){return Tn}),r.d(i,"mul",function(){return xn}),r.d(i,"div",function(){return An}),r.d(i,"dist",function(){return _n}),r.d(i,"sqrDist",function(){return Pn}),r.d(i,"len",function(){return yn}),r.d(i,"sqrLen",function(){return Ln}),r.d(i,"forEach",function(){return Sn});var u={};r.r(u),r.d(u,"create",function(){return On}),r.d(u,"identity",function(){return Fn}),r.d(u,"setAxisAngle",function(){return Dn}),r.d(u,"getAxisAngle",function(){return In}),r.d(u,"multiply",function(){return Cn}),r.d(u,"rotateX",function(){return Nn}),r.d(u,"rotateY",function(){return Yn}),r.d(u,"rotateZ",function(){return qn}),r.d(u,"calculateW",function(){return Un}),r.d(u,"slerp",function(){return Bn}),r.d(u,"random",function(){return zn}),r.d(u,"invert",function(){return jn}),r.d(u,"conjugate",function(){return Vn}),r.d(u,"fromMat3",function(){return kn}),r.d(u,"fromEuler",function(){return Xn}),r.d(u,"str",function(){return Gn}),r.d(u,"clone",function(){return Jn}),r.d(u,"fromValues",function(){return tr}),r.d(u,"copy",function(){return nr}),r.d(u,"set",function(){return rr}),r.d(u,"add",function(){return er}),r.d(u,"mul",function(){return or}),r.d(u,"scale",function(){return ar}),r.d(u,"dot",function(){return ir}),r.d(u,"lerp",function(){return ur}),r.d(u,"length",function(){return cr}),r.d(u,"len",function(){return sr}),r.d(u,"squaredLength",function(){return fr}),r.d(u,"sqrLen",function(){return lr}),r.d(u,"normalize",function(){return dr}),r.d(u,"exactEquals",function(){return hr}),r.d(u,"equals",function(){return mr}),r.d(u,"rotationTo",function(){return vr}),r.d(u,"sqlerp",function(){return pr}),r.d(u,"setAxes",function(){return Mr});var c={};r.r(c),r.d(c,"create",function(){return gr}),r.d(c,"clone",function(){return br}),r.d(c,"fromValues",function(){return wr}),r.d(c,"fromRotationTranslationValues",function(){return Er}),r.d(c,"fromRotationTranslation",function(){return Rr}),r.d(c,"fromTranslation",function(){return Tr}),r.d(c,"fromRotation",function(){return xr}),r.d(c,"fromMat4",function(){return Ar}),r.d(c,"copy",function(){return _r}),r.d(c,"identity",function(){return Pr}),r.d(c,"set",function(){return yr}),r.d(c,"getReal",function(){return Lr}),r.d(c,"getDual",function(){return Sr}),r.d(c,"setReal",function(){return Or}),r.d(c,"setDual",function(){return Fr}),r.d(c,"getTranslation",function(){return Dr}),r.d(c,"translate",function(){return Ir}),r.d(c,"rotateX",function(){return Cr}),r.d(c,"rotateY",function(){return Nr}),r.d(c,"rotateZ",function(){return Yr}),r.d(c,"rotateByQuatAppend",function(){return qr}),r.d(c,"rotateByQuatPrepend",function(){return Ur}),r.d(c,"rotateAroundAxis",function(){return Br}),r.d(c,"add",function(){return zr}),r.d(c,"multiply",function(){return jr}),r.d(c,"mul",function(){return Vr}),r.d(c,"scale",function(){return kr}),r.d(c,"dot",function(){return Xr}),r.d(c,"lerp",function(){return Gr}),r.d(c,"invert",function(){return Hr}),r.d(c,"conjugate",function(){return Wr}),r.d(c,"length",function(){return Qr}),r.d(c,"len",function(){return Zr}),r.d(c,"squaredLength",function(){return $r}),r.d(c,"sqrLen",function(){return Kr}),r.d(c,"normalize",function(){return Jr}),r.d(c,"str",function(){return te}),r.d(c,"exactEquals",function(){return ne}),r.d(c,"equals",function(){return re});var s={};r.r(s),r.d(s,"create",function(){return ee}),r.d(s,"clone",function(){return oe}),r.d(s,"fromValues",function(){return ae}),r.d(s,"copy",function(){return ie}),r.d(s,"set",function(){return ue}),r.d(s,"add",function(){return ce}),r.d(s,"subtract",function(){return se}),r.d(s,"multiply",function(){return fe}),r.d(s,"divide",function(){return le}),r.d(s,"ceil",function(){return de}),r.d(s,"floor",function(){return he}),r.d(s,"min",function(){return me}),r.d(s,"max",function(){return ve}),r.d(s,"round",function(){return pe}),r.d(s,"scale",function(){return Me}),r.d(s,"scaleAndAdd",function(){return ge}),r.d(s,"distance",function(){return be}),r.d(s,"squaredDistance",function(){return we}),r.d(s,"length",function(){return Ee}),r.d(s,"squaredLength",function(){return Re}),r.d(s,"negate",function(){return Te}),r.d(s,"inverse",function(){return xe}),r.d(s,"normalize",function(){return Ae}),r.d(s,"dot",function(){return _e}),r.d(s,"cross",function(){return Pe}),r.d(s,"lerp",function(){return ye}),r.d(s,"random",function(){return Le}),r.d(s,"transformMat2",function(){return Se}),r.d(s,"transformMat2d",function(){return Oe}),r.d(s,"transformMat3",function(){return Fe}),r.d(s,"transformMat4",function(){return De}),r.d(s,"rotate",function(){return Ie}),r.d(s,"angle",function(){return Ce}),r.d(s,"zero",function(){return Ne}),r.d(s,"str",function(){return Ye}),r.d(s,"exactEquals",function(){return qe}),r.d(s,"equals",function(){return Ue}),r.d(s,"len",function(){return Be}),r.d(s,"sub",function(){return ze}),r.d(s,"mul",function(){return je}),r.d(s,"div",function(){return Ve}),r.d(s,"dist",function(){return ke}),r.d(s,"sqrDist",function(){return Xe}),r.d(s,"sqrLen",function(){return Ge}),r.d(s,"forEach",function(){return He});var f=r(0);function l(){var t=new f.ARRAY_TYPE(4);return f.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function d(t){var n=new f.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function h(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function v(t,n,r,e){var o=new f.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o}function p(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t}function M(t,n){if(t===n){var r=n[1];t[1]=n[2],t[2]=r}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t}function g(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*a-o*e;return i?(i=1/i,t[0]=a*i,t[1]=-e*i,t[2]=-o*i,t[3]=r*i,t):null}function b(t,n){var r=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=r,t}function w(t){return t[0]*t[3]-t[2]*t[1]}function E(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1],s=r[2],f=r[3];return t[0]=e*u+a*c,t[1]=o*u+i*c,t[2]=e*s+a*f,t[3]=o*s+i*f,t}function R(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c+a*u,t[1]=o*c+i*u,t[2]=e*-u+a*c,t[3]=o*-u+i*c,t}function T(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1];return t[0]=e*u,t[1]=o*u,t[2]=a*c,t[3]=i*c,t}function x(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t}function A(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t}function _(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function P(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function y(t,n,r,e){return t[2]=e[2]/e[0],r[0]=e[0],r[1]=e[1],r[3]=e[3]-t[2]*r[1],[t,n,r]}function L(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function S(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function O(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function F(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=n[0],u=n[1],c=n[2],s=n[3];return Math.abs(r-i)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(o-c)<=f.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-s)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))}function D(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function I(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}var C=E,N=S;function Y(){var t=new f.ARRAY_TYPE(6);return f.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function q(t){var n=new f.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function U(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t}function B(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function z(t,n,r,e,o,a){var i=new f.ARRAY_TYPE(6);return i[0]=t,i[1]=n,i[2]=r,i[3]=e,i[4]=o,i[5]=a,i}function j(t,n,r,e,o,a,i){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t}function V(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=r*a-e*o;return c?(c=1/c,t[0]=a*c,t[1]=-e*c,t[2]=-o*c,t[3]=r*c,t[4]=(o*u-a*i)*c,t[5]=(e*i-r*u)*c,t):null}function k(t){return t[0]*t[3]-t[1]*t[2]}function X(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=r[0],f=r[1],l=r[2],d=r[3],h=r[4],m=r[5];return t[0]=e*s+a*f,t[1]=o*s+i*f,t[2]=e*l+a*d,t[3]=o*l+i*d,t[4]=e*h+a*m+u,t[5]=o*h+i*m+c,t}function G(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=Math.sin(r),f=Math.cos(r);return t[0]=e*f+a*s,t[1]=o*f+i*s,t[2]=e*-s+a*f,t[3]=o*-s+i*f,t[4]=u,t[5]=c,t}function H(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=r[0],f=r[1];return t[0]=e*s,t[1]=o*s,t[2]=a*f,t[3]=i*f,t[4]=u,t[5]=c,t}function W(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=r[0],f=r[1];return t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=e*s+a*f+u,t[5]=o*s+i*f+c,t}function Q(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=-r,t[3]=e,t[4]=0,t[5]=0,t}function Z(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t}function $(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t}function K(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function J(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function tt(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t}function nt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t}function rt(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t}function et(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t}function ot(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]}function at(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=n[0],s=n[1],l=n[2],d=n[3],h=n[4],m=n[5];return Math.abs(r-c)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(e-s)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-l)<=f.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-d)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(i-h)<=f.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-m)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))}var it=X,ut=nt;function ct(){var t=new f.ARRAY_TYPE(9);return f.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function st(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t}function ft(t){var n=new f.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n}function lt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function dt(t,n,r,e,o,a,i,u,c){var s=new f.ARRAY_TYPE(9);return s[0]=t,s[1]=n,s[2]=r,s[3]=e,s[4]=o,s[5]=a,s[6]=i,s[7]=u,s[8]=c,s}function ht(t,n,r,e,o,a,i,u,c,s){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t[8]=s,t}function mt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vt(t,n){if(t===n){var r=n[1],e=n[2],o=n[5];t[1]=n[3],t[2]=n[6],t[3]=r,t[5]=n[7],t[6]=e,t[7]=o}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t}function pt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=f*i-u*s,d=-f*a+u*c,h=s*a-i*c,m=r*l+e*d+o*h;return m?(m=1/m,t[0]=l*m,t[1]=(-f*e+o*s)*m,t[2]=(u*e-o*i)*m,t[3]=d*m,t[4]=(f*r-o*c)*m,t[5]=(-u*r+o*a)*m,t[6]=h*m,t[7]=(-s*r+e*c)*m,t[8]=(i*r-e*a)*m,t):null}function Mt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8];return t[0]=i*f-u*s,t[1]=o*s-e*f,t[2]=e*u-o*i,t[3]=u*c-a*f,t[4]=r*f-o*c,t[5]=o*a-r*u,t[6]=a*s-i*c,t[7]=e*c-r*s,t[8]=r*i-e*a,t}function gt(t){var n=t[0],r=t[1],e=t[2],o=t[3],a=t[4],i=t[5],u=t[6],c=t[7],s=t[8];return n*(s*a-i*c)+r*(-s*o+i*u)+e*(c*o-a*u)}function bt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=r[0],h=r[1],m=r[2],v=r[3],p=r[4],M=r[5],g=r[6],b=r[7],w=r[8];return t[0]=d*e+h*i+m*s,t[1]=d*o+h*u+m*f,t[2]=d*a+h*c+m*l,t[3]=v*e+p*i+M*s,t[4]=v*o+p*u+M*f,t[5]=v*a+p*c+M*l,t[6]=g*e+b*i+w*s,t[7]=g*o+b*u+w*f,t[8]=g*a+b*c+w*l,t}function wt(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=r[0],h=r[1];return t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=u,t[5]=c,t[6]=d*e+h*i+s,t[7]=d*o+h*u+f,t[8]=d*a+h*c+l,t}function Et(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=Math.sin(r),h=Math.cos(r);return t[0]=h*e+d*i,t[1]=h*o+d*u,t[2]=h*a+d*c,t[3]=h*i-d*e,t[4]=h*u-d*o,t[5]=h*c-d*a,t[6]=s,t[7]=f,t[8]=l,t}function Rt(t,n,r){var e=r[0],o=r[1];return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=o*n[3],t[4]=o*n[4],t[5]=o*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t}function Tt(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t}function xt(t,n){var r=Math.sin(n),e=Math.cos(n);return t[0]=e,t[1]=r,t[2]=0,t[3]=-r,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function At(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _t(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t}function Pt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r+r,u=e+e,c=o+o,s=r*i,f=e*i,l=e*u,d=o*i,h=o*u,m=o*c,v=a*i,p=a*u,M=a*c;return t[0]=1-l-m,t[3]=f-M,t[6]=d+p,t[1]=f+M,t[4]=1-s-m,t[7]=h-v,t[2]=d-p,t[5]=h+v,t[8]=1-s-l,t}function yt(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],h=n[11],m=n[12],v=n[13],p=n[14],M=n[15],g=r*u-e*i,b=r*c-o*i,w=r*s-a*i,E=e*c-o*u,R=e*s-a*u,T=o*s-a*c,x=f*v-l*m,A=f*p-d*m,_=f*M-h*m,P=l*p-d*v,y=l*M-h*v,L=d*M-h*p,S=g*L-b*y+w*P+E*_-R*A+T*x;return S?(S=1/S,t[0]=(u*L-c*y+s*P)*S,t[1]=(c*_-i*L-s*A)*S,t[2]=(i*y-u*_+s*x)*S,t[3]=(o*y-e*L-a*P)*S,t[4]=(r*L-o*_+a*A)*S,t[5]=(e*_-r*y-a*x)*S,t[6]=(v*T-p*R+M*E)*S,t[7]=(p*w-m*T-M*b)*S,t[8]=(m*R-v*w+M*g)*S,t):null}function Lt(t,n,r){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function St(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Ot(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function Ft(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t[8]=n[8]+r[8],t}function Dt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t[4]=n[4]-r[4],t[5]=n[5]-r[5],t[6]=n[6]-r[6],t[7]=n[7]-r[7],t[8]=n[8]-r[8],t}function It(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t[8]=n[8]*r,t}function Ct(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t[4]=n[4]+r[4]*e,t[5]=n[5]+r[5]*e,t[6]=n[6]+r[6]*e,t[7]=n[7]+r[7]*e,t[8]=n[8]+r[8]*e,t}function Nt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]}function Yt(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],s=t[7],l=t[8],d=n[0],h=n[1],m=n[2],v=n[3],p=n[4],M=n[5],g=n[6],b=n[7],w=n[8];return Math.abs(r-d)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(e-h)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-m)<=f.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-v)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-p)<=f.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-M)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-g)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(s-b)<=f.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(l-w)<=f.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))}var qt=bt,Ut=Dt,Bt=r(2),zt=r(1);function jt(){var t=new f.ARRAY_TYPE(4);return f.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Vt(t){var n=new f.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function kt(t,n,r,e){var o=new f.ARRAY_TYPE(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=e,o}function Xt(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t}function Gt(t,n,r,e,o){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t}function Ht(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t}function Wt(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t[2]=n[2]-r[2],t[3]=n[3]-r[3],t}function Qt(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t[2]=n[2]*r[2],t[3]=n[3]*r[3],t}function Zt(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t[2]=n[2]/r[2],t[3]=n[3]/r[3],t}function $t(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t}function Kt(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t}function Jt(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t[2]=Math.min(n[2],r[2]),t[3]=Math.min(n[3],r[3]),t}function tn(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t[2]=Math.max(n[2],r[2]),t[3]=Math.max(n[3],r[3]),t}function nn(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t}function rn(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t}function en(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t[2]=n[2]+r[2]*e,t[3]=n[3]+r[3]*e,t}function on(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],a=n[3]-t[3];return Math.sqrt(r*r+e*e+o*o+a*a)}function an(t,n){var r=n[0]-t[0],e=n[1]-t[1],o=n[2]-t[2],a=n[3]-t[3];return r*r+e*e+o*o+a*a}function un(t){var n=t[0],r=t[1],e=t[2],o=t[3];return Math.sqrt(n*n+r*r+e*e+o*o)}function cn(t){var n=t[0],r=t[1],e=t[2],o=t[3];return n*n+r*r+e*e+o*o}function sn(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t}function fn(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t}function ln(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*r+e*e+o*o+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=r*i,t[1]=e*i,t[2]=o*i,t[3]=a*i,t}function dn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}function hn(t,n,r,e){var o=r[0]*e[1]-r[1]*e[0],a=r[0]*e[2]-r[2]*e[0],i=r[0]*e[3]-r[3]*e[0],u=r[1]*e[2]-r[2]*e[1],c=r[1]*e[3]-r[3]*e[1],s=r[2]*e[3]-r[3]*e[2],f=n[0],l=n[1],d=n[2],h=n[3];return t[0]=l*s-d*c+h*u,t[1]=-f*s+d*i-h*a,t[2]=f*c-l*i+h*o,t[3]=-f*u+l*a-d*o,t}function mn(t,n,r,e){var o=n[0],a=n[1],i=n[2],u=n[3];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t[2]=i+e*(r[2]-i),t[3]=u+e*(r[3]-u),t}function vn(t,n){var r,e,o,a,i,u;n=n||1;do{i=(r=2*f.RANDOM()-1)*r+(e=2*f.RANDOM()-1)*e}while(i>=1);do{u=(o=2*f.RANDOM()-1)*o+(a=2*f.RANDOM()-1)*a}while(u>=1);var c=Math.sqrt((1-i)/u);return t[0]=n*r,t[1]=n*e,t[2]=n*o*c,t[3]=n*a*c,t}function pn(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3];return t[0]=r[0]*e+r[4]*o+r[8]*a+r[12]*i,t[1]=r[1]*e+r[5]*o+r[9]*a+r[13]*i,t[2]=r[2]*e+r[6]*o+r[10]*a+r[14]*i,t[3]=r[3]*e+r[7]*o+r[11]*a+r[15]*i,t}function Mn(t,n,r){var e=n[0],o=n[1],a=n[2],i=r[0],u=r[1],c=r[2],s=r[3],f=s*e+u*a-c*o,l=s*o+c*e-i*a,d=s*a+i*o-u*e,h=-i*e-u*o-c*a;return t[0]=f*s+h*-i+l*-c-d*-u,t[1]=l*s+h*-u+d*-i-f*-c,t[2]=d*s+h*-c+f*-u-l*-i,t[3]=n[3],t}function gn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function bn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function wn(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function En(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=n[0],u=n[1],c=n[2],s=n[3];return Math.abs(r-i)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-u)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(o-c)<=f.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-s)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))}var Rn,Tn=Wt,xn=Qt,An=Zt,_n=on,Pn=an,yn=un,Ln=cn,Sn=(Rn=jt(),function(t,n,r,e,o,a){var i,u;for(n||(n=4),r||(r=0),u=e?Math.min(e*n+r,t.length):t.length,i=r;i<u;i+=n)Rn[0]=t[i],Rn[1]=t[i+1],Rn[2]=t[i+2],Rn[3]=t[i+3],o(Rn,Rn,a),t[i]=Rn[0],t[i+1]=Rn[1],t[i+2]=Rn[2],t[i+3]=Rn[3];return t});function On(){var t=new f.ARRAY_TYPE(4);return f.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Fn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Dn(t,n,r){r*=.5;var e=Math.sin(r);return t[0]=e*n[0],t[1]=e*n[1],t[2]=e*n[2],t[3]=Math.cos(r),t}function In(t,n){var r=2*Math.acos(n[3]),e=Math.sin(r/2);return e>f.EPSILON?(t[0]=n[0]/e,t[1]=n[1]/e,t[2]=n[2]/e):(t[0]=1,t[1]=0,t[2]=0),r}function Cn(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1],s=r[2],f=r[3];return t[0]=e*f+i*u+o*s-a*c,t[1]=o*f+i*c+a*u-e*s,t[2]=a*f+i*s+e*c-o*u,t[3]=i*f-e*u-o*c-a*s,t}function Nn(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c+i*u,t[1]=o*c+a*u,t[2]=a*c-o*u,t[3]=i*c-e*u,t}function Yn(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c-a*u,t[1]=o*c+i*u,t[2]=a*c+e*u,t[3]=i*c-o*u,t}function qn(t,n,r){r*=.5;var e=n[0],o=n[1],a=n[2],i=n[3],u=Math.sin(r),c=Math.cos(r);return t[0]=e*c+o*u,t[1]=o*c-e*u,t[2]=a*c+i*u,t[3]=i*c-a*u,t}function Un(t,n){var r=n[0],e=n[1],o=n[2];return t[0]=r,t[1]=e,t[2]=o,t[3]=Math.sqrt(Math.abs(1-r*r-e*e-o*o)),t}function Bn(t,n,r,e){var o,a,i,u,c,s=n[0],l=n[1],d=n[2],h=n[3],m=r[0],v=r[1],p=r[2],M=r[3];return(a=s*m+l*v+d*p+h*M)<0&&(a=-a,m=-m,v=-v,p=-p,M=-M),1-a>f.EPSILON?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-e)*o)/i,c=Math.sin(e*o)/i):(u=1-e,c=e),t[0]=u*s+c*m,t[1]=u*l+c*v,t[2]=u*d+c*p,t[3]=u*h+c*M,t}function zn(t){var n=f.RANDOM(),r=f.RANDOM(),e=f.RANDOM(),o=Math.sqrt(1-n),a=Math.sqrt(n);return t[0]=o*Math.sin(2*Math.PI*r),t[1]=o*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*e),t[3]=a*Math.cos(2*Math.PI*e),t}function jn(t,n){var r=n[0],e=n[1],o=n[2],a=n[3],i=r*r+e*e+o*o+a*a,u=i?1/i:0;return t[0]=-r*u,t[1]=-e*u,t[2]=-o*u,t[3]=a*u,t}function Vn(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t}function kn(t,n){var r,e=n[0]+n[4]+n[8];if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var o=0;n[4]>n[0]&&(o=1),n[8]>n[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;r=Math.sqrt(n[3*o+o]-n[3*a+a]-n[3*i+i]+1),t[o]=.5*r,r=.5/r,t[3]=(n[3*a+i]-n[3*i+a])*r,t[a]=(n[3*a+o]+n[3*o+a])*r,t[i]=(n[3*i+o]+n[3*o+i])*r}return t}function Xn(t,n,r,e){var o=.5*Math.PI/180;n*=o,r*=o,e*=o;var a=Math.sin(n),i=Math.cos(n),u=Math.sin(r),c=Math.cos(r),s=Math.sin(e),f=Math.cos(e);return t[0]=a*c*f-i*u*s,t[1]=i*u*f+a*c*s,t[2]=i*c*s-a*u*f,t[3]=i*c*f+a*u*s,t}function Gn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Hn,Wn,Qn,Zn,$n,Kn,Jn=Vt,tr=kt,nr=Xt,rr=Gt,er=Ht,or=Cn,ar=rn,ir=dn,ur=mn,cr=un,sr=cr,fr=cn,lr=fr,dr=ln,hr=wn,mr=En,vr=(Hn=zt.create(),Wn=zt.fromValues(1,0,0),Qn=zt.fromValues(0,1,0),function(t,n,r){var e=zt.dot(n,r);return e<-.999999?(zt.cross(Hn,Wn,n),zt.len(Hn)<1e-6&&zt.cross(Hn,Qn,n),zt.normalize(Hn,Hn),Dn(t,Hn,Math.PI),t):e>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(zt.cross(Hn,n,r),t[0]=Hn[0],t[1]=Hn[1],t[2]=Hn[2],t[3]=1+e,dr(t,t))}),pr=(Zn=On(),$n=On(),function(t,n,r,e,o,a){return Bn(Zn,n,o,a),Bn($n,r,e,a),Bn(t,Zn,$n,2*a*(1-a)),t}),Mr=(Kn=ct(),function(t,n,r,e){return Kn[0]=r[0],Kn[3]=r[1],Kn[6]=r[2],Kn[1]=e[0],Kn[4]=e[1],Kn[7]=e[2],Kn[2]=-n[0],Kn[5]=-n[1],Kn[8]=-n[2],dr(t,kn(t,Kn))});function gr(){var t=new f.ARRAY_TYPE(8);return f.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function br(t){var n=new f.ARRAY_TYPE(8);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n}function wr(t,n,r,e,o,a,i,u){var c=new f.ARRAY_TYPE(8);return c[0]=t,c[1]=n,c[2]=r,c[3]=e,c[4]=o,c[5]=a,c[6]=i,c[7]=u,c}function Er(t,n,r,e,o,a,i){var u=new f.ARRAY_TYPE(8);u[0]=t,u[1]=n,u[2]=r,u[3]=e;var c=.5*o,s=.5*a,l=.5*i;return u[4]=c*e+s*r-l*n,u[5]=s*e+l*t-c*r,u[6]=l*e+c*n-s*t,u[7]=-c*t-s*n-l*r,u}function Rr(t,n,r){var e=.5*r[0],o=.5*r[1],a=.5*r[2],i=n[0],u=n[1],c=n[2],s=n[3];return t[0]=i,t[1]=u,t[2]=c,t[3]=s,t[4]=e*s+o*c-a*u,t[5]=o*s+a*i-e*c,t[6]=a*s+e*u-o*i,t[7]=-e*i-o*u-a*c,t}function Tr(t,n){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*n[0],t[5]=.5*n[1],t[6]=.5*n[2],t[7]=0,t}function xr(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ar(t,n){var r=On();Bt.getRotation(r,n);var e=new f.ARRAY_TYPE(3);return Bt.getTranslation(e,n),Rr(t,r,e),t}function _r(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t}function Pr(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function yr(t,n,r,e,o,a,i,u,c){return t[0]=n,t[1]=r,t[2]=e,t[3]=o,t[4]=a,t[5]=i,t[6]=u,t[7]=c,t}var Lr=nr;function Sr(t,n){return t[0]=n[4],t[1]=n[5],t[2]=n[6],t[3]=n[7],t}var Or=nr;function Fr(t,n){return t[4]=n[0],t[5]=n[1],t[6]=n[2],t[7]=n[3],t}function Dr(t,n){var r=n[4],e=n[5],o=n[6],a=n[7],i=-n[0],u=-n[1],c=-n[2],s=n[3];return t[0]=2*(r*s+a*i+e*c-o*u),t[1]=2*(e*s+a*u+o*i-r*c),t[2]=2*(o*s+a*c+r*u-e*i),t}function Ir(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=.5*r[0],c=.5*r[1],s=.5*r[2],f=n[4],l=n[5],d=n[6],h=n[7];return t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=i*u+o*s-a*c+f,t[5]=i*c+a*u-e*s+l,t[6]=i*s+e*c-o*u+d,t[7]=-e*u-o*c-a*s+h,t}function Cr(t,n,r){var e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=u*i+f*e+c*a-s*o,d=c*i+f*o+s*e-u*a,h=s*i+f*a+u*o-c*e,m=f*i-u*e-c*o-s*a;return Nn(t,n,r),e=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+m*e+d*a-h*o,t[5]=d*i+m*o+h*e-l*a,t[6]=h*i+m*a+l*o-d*e,t[7]=m*i-l*e-d*o-h*a,t}function Nr(t,n,r){var e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=u*i+f*e+c*a-s*o,d=c*i+f*o+s*e-u*a,h=s*i+f*a+u*o-c*e,m=f*i-u*e-c*o-s*a;return Yn(t,n,r),e=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+m*e+d*a-h*o,t[5]=d*i+m*o+h*e-l*a,t[6]=h*i+m*a+l*o-d*e,t[7]=m*i-l*e-d*o-h*a,t}function Yr(t,n,r){var e=-n[0],o=-n[1],a=-n[2],i=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=u*i+f*e+c*a-s*o,d=c*i+f*o+s*e-u*a,h=s*i+f*a+u*o-c*e,m=f*i-u*e-c*o-s*a;return qn(t,n,r),e=t[0],o=t[1],a=t[2],i=t[3],t[4]=l*i+m*e+d*a-h*o,t[5]=d*i+m*o+h*e-l*a,t[6]=h*i+m*a+l*o-d*e,t[7]=m*i-l*e-d*o-h*a,t}function qr(t,n,r){var e=r[0],o=r[1],a=r[2],i=r[3],u=n[0],c=n[1],s=n[2],f=n[3];return t[0]=u*i+f*e+c*a-s*o,t[1]=c*i+f*o+s*e-u*a,t[2]=s*i+f*a+u*o-c*e,t[3]=f*i-u*e-c*o-s*a,u=n[4],c=n[5],s=n[6],f=n[7],t[4]=u*i+f*e+c*a-s*o,t[5]=c*i+f*o+s*e-u*a,t[6]=s*i+f*a+u*o-c*e,t[7]=f*i-u*e-c*o-s*a,t}function Ur(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[0],c=r[1],s=r[2],f=r[3];return t[0]=e*f+i*u+o*s-a*c,t[1]=o*f+i*c+a*u-e*s,t[2]=a*f+i*s+e*c-o*u,t[3]=i*f-e*u-o*c-a*s,u=r[4],c=r[5],s=r[6],f=r[7],t[4]=e*f+i*u+o*s-a*c,t[5]=o*f+i*c+a*u-e*s,t[6]=a*f+i*s+e*c-o*u,t[7]=i*f-e*u-o*c-a*s,t}function Br(t,n,r,e){if(Math.abs(e)<f.EPSILON)return _r(t,n);var o=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);e*=.5;var a=Math.sin(e),i=a*r[0]/o,u=a*r[1]/o,c=a*r[2]/o,s=Math.cos(e),l=n[0],d=n[1],h=n[2],m=n[3];t[0]=l*s+m*i+d*c-h*u,t[1]=d*s+m*u+h*i-l*c,t[2]=h*s+m*c+l*u-d*i,t[3]=m*s-l*i-d*u-h*c;var v=n[4],p=n[5],M=n[6],g=n[7];return t[4]=v*s+g*i+p*c-M*u,t[5]=p*s+g*u+M*i-v*c,t[6]=M*s+g*c+v*u-p*i,t[7]=g*s-v*i-p*u-M*c,t}function zr(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t[2]=n[2]+r[2],t[3]=n[3]+r[3],t[4]=n[4]+r[4],t[5]=n[5]+r[5],t[6]=n[6]+r[6],t[7]=n[7]+r[7],t}function jr(t,n,r){var e=n[0],o=n[1],a=n[2],i=n[3],u=r[4],c=r[5],s=r[6],f=r[7],l=n[4],d=n[5],h=n[6],m=n[7],v=r[0],p=r[1],M=r[2],g=r[3];return t[0]=e*g+i*v+o*M-a*p,t[1]=o*g+i*p+a*v-e*M,t[2]=a*g+i*M+e*p-o*v,t[3]=i*g-e*v-o*p-a*M,t[4]=e*f+i*u+o*s-a*c+l*g+m*v+d*M-h*p,t[5]=o*f+i*c+a*u-e*s+d*g+m*p+h*v-l*M,t[6]=a*f+i*s+e*c-o*u+h*g+m*M+l*p-d*v,t[7]=i*f-e*u-o*c-a*s+m*g-l*v-d*p-h*M,t}var Vr=jr;function kr(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=n[7]*r,t}var Xr=ir;function Gr(t,n,r,e){var o=1-e;return Xr(n,r)<0&&(e=-e),t[0]=n[0]*o+r[0]*e,t[1]=n[1]*o+r[1]*e,t[2]=n[2]*o+r[2]*e,t[3]=n[3]*o+r[3]*e,t[4]=n[4]*o+r[4]*e,t[5]=n[5]*o+r[5]*e,t[6]=n[6]*o+r[6]*e,t[7]=n[7]*o+r[7]*e,t}function Hr(t,n){var r=$r(n);return t[0]=-n[0]/r,t[1]=-n[1]/r,t[2]=-n[2]/r,t[3]=n[3]/r,t[4]=-n[4]/r,t[5]=-n[5]/r,t[6]=-n[6]/r,t[7]=n[7]/r,t}function Wr(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t[4]=-n[4],t[5]=-n[5],t[6]=-n[6],t[7]=n[7],t}var Qr=cr,Zr=Qr,$r=fr,Kr=$r;function Jr(t,n){var r=$r(n);if(r>0){r=Math.sqrt(r);var e=n[0]/r,o=n[1]/r,a=n[2]/r,i=n[3]/r,u=n[4],c=n[5],s=n[6],f=n[7],l=e*u+o*c+a*s+i*f;t[0]=e,t[1]=o,t[2]=a,t[3]=i,t[4]=(u-e*l)/r,t[5]=(c-o*l)/r,t[6]=(s-a*l)/r,t[7]=(f-i*l)/r}return t}function te(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ne(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]}function re(t,n){var r=t[0],e=t[1],o=t[2],a=t[3],i=t[4],u=t[5],c=t[6],s=t[7],l=n[0],d=n[1],h=n[2],m=n[3],v=n[4],p=n[5],M=n[6],g=n[7];return Math.abs(r-l)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(e-d)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(d))&&Math.abs(o-h)<=f.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-m)<=f.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-v)<=f.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-p)<=f.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))&&Math.abs(c-M)<=f.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))&&Math.abs(s-g)<=f.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))}function ee(){var t=new f.ARRAY_TYPE(2);return f.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function oe(t){var n=new f.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n}function ae(t,n){var r=new f.ARRAY_TYPE(2);return r[0]=t,r[1]=n,r}function ie(t,n){return t[0]=n[0],t[1]=n[1],t}function ue(t,n,r){return t[0]=n,t[1]=r,t}function ce(t,n,r){return t[0]=n[0]+r[0],t[1]=n[1]+r[1],t}function se(t,n,r){return t[0]=n[0]-r[0],t[1]=n[1]-r[1],t}function fe(t,n,r){return t[0]=n[0]*r[0],t[1]=n[1]*r[1],t}function le(t,n,r){return t[0]=n[0]/r[0],t[1]=n[1]/r[1],t}function de(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t}function he(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t}function me(t,n,r){return t[0]=Math.min(n[0],r[0]),t[1]=Math.min(n[1],r[1]),t}function ve(t,n,r){return t[0]=Math.max(n[0],r[0]),t[1]=Math.max(n[1],r[1]),t}function pe(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t}function Me(t,n,r){return t[0]=n[0]*r,t[1]=n[1]*r,t}function ge(t,n,r,e){return t[0]=n[0]+r[0]*e,t[1]=n[1]+r[1]*e,t}function be(t,n){var r=n[0]-t[0],e=n[1]-t[1];return Math.sqrt(r*r+e*e)}function we(t,n){var r=n[0]-t[0],e=n[1]-t[1];return r*r+e*e}function Ee(t){var n=t[0],r=t[1];return Math.sqrt(n*n+r*r)}function Re(t){var n=t[0],r=t[1];return n*n+r*r}function Te(t,n){return t[0]=-n[0],t[1]=-n[1],t}function xe(t,n){return t[0]=1/n[0],t[1]=1/n[1],t}function Ae(t,n){var r=n[0],e=n[1],o=r*r+e*e;return o>0&&(o=1/Math.sqrt(o)),t[0]=n[0]*o,t[1]=n[1]*o,t}function _e(t,n){return t[0]*n[0]+t[1]*n[1]}function Pe(t,n,r){var e=n[0]*r[1]-n[1]*r[0];return t[0]=t[1]=0,t[2]=e,t}function ye(t,n,r,e){var o=n[0],a=n[1];return t[0]=o+e*(r[0]-o),t[1]=a+e*(r[1]-a),t}function Le(t,n){n=n||1;var r=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t}function Se(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[2]*o,t[1]=r[1]*e+r[3]*o,t}function Oe(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[2]*o+r[4],t[1]=r[1]*e+r[3]*o+r[5],t}function Fe(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[3]*o+r[6],t[1]=r[1]*e+r[4]*o+r[7],t}function De(t,n,r){var e=n[0],o=n[1];return t[0]=r[0]*e+r[4]*o+r[12],t[1]=r[1]*e+r[5]*o+r[13],t}function Ie(t,n,r,e){var o=n[0]-r[0],a=n[1]-r[1],i=Math.sin(e),u=Math.cos(e);return t[0]=o*u-a*i+r[0],t[1]=o*i+a*u+r[1],t}function Ce(t,n){var r=t[0],e=t[1],o=n[0],a=n[1],i=r*r+e*e;i>0&&(i=1/Math.sqrt(i));var u=o*o+a*a;u>0&&(u=1/Math.sqrt(u));var c=(r*o+e*a)*i*u;return c>1?0:c<-1?Math.PI:Math.acos(c)}function Ne(t){return t[0]=0,t[1]=0,t}function Ye(t){return"vec2("+t[0]+", "+t[1]+")"}function qe(t,n){return t[0]===n[0]&&t[1]===n[1]}function Ue(t,n){var r=t[0],e=t[1],o=n[0],a=n[1];return Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-a)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))}var Be=Ee,ze=se,je=fe,Ve=le,ke=be,Xe=we,Ge=Re,He=function(){var t=ee();return function(n,r,e,o,a,i){var u,c;for(r||(r=2),e||(e=0),c=o?Math.min(o*r+e,n.length):n.length,u=e;u<c;u+=r)t[0]=n[u],t[1]=n[u+1],a(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}();r.d(n,"glMatrix",function(){return f}),r.d(n,"mat2",function(){return e}),r.d(n,"mat2d",function(){return o}),r.d(n,"mat3",function(){return a}),r.d(n,"mat4",function(){return Bt}),r.d(n,"quat",function(){return u}),r.d(n,"quat2",function(){return c}),r.d(n,"vec2",function(){return s}),r.d(n,"vec3",function(){return zt}),r.d(n,"vec4",function(){return i})}]);
//# sourceMappingURL=index.js.map