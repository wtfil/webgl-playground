{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/gl-matrix/esm/common.js","webpack:///./node_modules/gl-matrix/esm/vec3.js","webpack:///./src/index.ts","webpack:///./node_modules/gl-matrix/esm/mat4.js","webpack:///./src/shaders/terrain.vertex.glsl","webpack:///./src/shaders/terrain.fragment.glsl","webpack:///./src/shaders/water.vertex.glsl","webpack:///./src/shaders/water.fragment.glsl","webpack:///./src/shaders/sun.vertex.glsl","webpack:///./src/shaders/sun.fragment.glsl","webpack:///./src/create-terrain.ts","webpack:///./src/init-contol.ts","webpack:///./node_modules/node-libs-browser/node_modules/events/events.js","webpack:///./src/create-water.ts","webpack:///./src/create-sun.ts","webpack:///./src/render-properties.ts","webpack:///./src/utils.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","EPSILON","ARRAY_TYPE","RANDOM","Float32Array","Array","Math","random","PI","clone","length","fromValues","copy","set","add","subtract","multiply","divide","ceil","floor","min","max","round","scale","scaleAndAdd","distance","squaredDistance","squaredLength","negate","inverse","normalize","dot","cross","lerp","hermite","bezier","transformMat4","transformMat3","transformQuat","rotateX","rotateY","rotateZ","angle","zero","str","exactEquals","equals","sub","mul","div","dist","sqrDist","len","sqrLen","forEach","_common_js__WEBPACK_IMPORTED_MODULE_0__","out","a","x","y","z","sqrt","b","ax","ay","az","bx","by","bz","factorTimes2","factor1","factor2","factor3","factor4","inverseFactor","inverseFactorTimesTwo","zScale","cos","sin","w","q","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","tempA","tempB","cosine","acos","a0","a1","a2","b0","b1","b2","abs","vec","stride","offset","count","fn","arg","Mat4","Vec3","terrain_vertex_glsl_1","__importDefault","terrain_fragment_glsl_1","water_vertex_glsl_1","water_fragment_glsl_1","sun_vertex_glsl_1","sun_fragment_glsl_1","create_terrain_1","init_contol_1","create_water_1","create_sun_1","render_properties_1","utils_1","window","addEventListener","async","canvas","document","querySelector","width","CANVAS_WIDTH","height","CANVAS_HEIGHT","gl","getContext","console","warn","propertiesNode","terrainProgram","createProgram","default","waterProgram","sunProgram","terrainData","createTerrain","DETAILS_LEVEL","terrain","createBuffers","arrays","dudvTexture","loadTexture","normalMapTexture","refractionTexture","refractionFramebuffer","createFramebufferAndTexture","WATER_SIZE","reflectionTexture","reflectionFramebuffer","water","createWater","framebuffers","refraction","reflection","textures","dudv","normalMap","sun","createSun","properties","center","cameraPosition","directionalLightVector","start","Date","now","time","renderWater","renderTerrain","useReflection","useRefraction","renderSun","initControls","on","updateProperties","e","eye","nextDistance","dy","move","dx","dl","renderProperties","render","drawScene","requestAnimationFrame","opts","buffers","position","createBuffer","ARRAY_BUFFER","colors","indices","ELEMENT_ARRAY_BUFFER","Uint16Array","normal","normals","texture","size","createMatrices","flip","projection","model","perspective","lookAt","props","waterHeight","clipLevel","translate","useProgram","program","bindBuffer","attributes","uniformMatrix4fv","uniforms","uniform3fv","uniform1f","clipZ","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","drawElements","TRIANGLES","UNSIGNED_SHORT","disable","updateRefractionTexture","bindFramebuffer","FRAMEBUFFER","viewport","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","updateReflectionTexture","textureCoord","dudvOffset","uniform1i","Number","activeTexture","TEXTURE0","bindTexture","TEXTURE_2D","TEXTURE1","TEXTURE2","TEXTURE3","clearDepth","clearColor","DEPTH_TEST","depthFunc","LEQUAL","identity","transpose","invert","adjoint","determinant","rotate","fromTranslation","fromScaling","fromRotation","fromXRotation","fromYRotation","fromZRotation","fromRotationTranslation","fromQuat2","getTranslation","getScaling","getRotation","fromRotationTranslationScale","fromRotationTranslationScaleOrigin","fromQuat","frustum","perspectiveFromFieldOfView","ortho","targetTo","frob","multiplyScalar","multiplyScalarAndAdd","m00","m01","m02","m03","m10","m11","m12","m13","m20","m21","m22","m23","m30","m31","m32","m33","a01","a02","a03","a12","a13","a23","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","b3","v","rad","axis","b12","b20","b21","b22","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","translation","bw","aw","magnitude","mat","trace","S","sx","sy","sz","ox","oy","oz","out0","out1","out2","out4","out5","out6","out8","out9","out10","yx","zx","zy","left","right","bottom","top","near","far","rl","tb","nf","fovy","aspect","f","tan","Infinity","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","lr","bt","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","target","pow","a3","a4","a5","a6","a7","a8","a9","a14","a15","b4","b5","b6","b7","b8","b9","b13","b14","b15","src","maxHeight","createElement","image","Promise","resolve","reject","Image","onload","onerror","loadImage","ctx","drawImage","data","getImageData","u32","Uint32Array","levelHeight","heatmap","j","k","timeEnd","push","h","iw","ih","facesIndexes","faces","facesNormals","p1","p2","p3","events_1","elem","mousedown","ee","EventEmitter","pressed","pullKeys","emit","deltaY","preventDefault","movementX","movementY","this","_events","_maxListeners","undefined","isFunction","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","type","er","handler","args","listeners","error","arguments","Error","err","context","slice","apply","addListener","listener","newListener","warned","once","fired","g","removeListener","list","splice","removeAllListeners","listenerCount","evlistener","emitter","vertextCount","arrToString","arr","from","map","toFixed","join","node","info","title","control","columns","body","innerHTML","item","tr","td","innerText","appendChild","createShader","source","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","url","createTexture","isPow2","texImage2D","RGBA","UNSIGNED_BYTE","Uint8Array","generateMipmap","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","vertextShaderSource","fragmentShaderSource","vertexShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","attributesCount","ACTIVE_ATTRIBUTES","uniformsCount","ACTIVE_UNIFORMS","getActiveAttrib","getAttribLocation","getActiveUniform","getUniformLocation","buffer","bufferData","STATIC_DRAW","attribute","numComponents","vertexAttribPointer","FLOAT","enableVertexAttribArray","framebuffer","createFramebuffer","TEXTURE_MAG_FILTER","framebufferTexture2D","COLOR_ATTACHMENT0"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","/**\r\n * Common utilities\r\n * @module glMatrix\r\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\r\n * Sets the type of array used when creating new vectors and matrices\r\n *\r\n * @param {Type} type Array type, such as Float32Array or Array\r\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\r\n * Convert Degree To Radian\r\n *\r\n * @param {Number} a Angle in Degrees\r\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\r\n * Tests whether or not the arguments have approximately the same value, within an absolute\r\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\r\n * than or equal to 1.0, and a relative tolerance is used for larger values)\r\n *\r\n * @param {Number} a The first number to test.\r\n * @param {Number} b The second number to test.\r\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}","import * as glMatrix from \"./common.js\";\n/**\r\n * 3 Dimensional Vector\r\n * @module vec3\r\n */\n\n/**\r\n * Creates a new, empty vec3\r\n *\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\r\n * Creates a new vec3 initialized with values from an existing vector\r\n *\r\n * @param {vec3} a vector to clone\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Calculates the length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate length of\r\n * @returns {Number} length of a\r\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Creates a new vec3 initialized with the given values\r\n *\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} a new 3D vector\r\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Copy the values from one vec3 to another\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the source vector\r\n * @returns {vec3} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\r\n * Set the components of a vec3 to the given values\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} x X component\r\n * @param {Number} y Y component\r\n * @param {Number} z Z component\r\n * @returns {vec3} out\r\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\r\n * Adds two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\r\n * Subtracts vector b from vector a\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\r\n * Multiplies two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\r\n * Divides two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\r\n * Math.ceil the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to ceil\r\n * @returns {vec3} out\r\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\r\n * Math.floor the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to floor\r\n * @returns {vec3} out\r\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\r\n * Returns the minimum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\r\n * Returns the maximum of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\r\n * Math.round the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to round\r\n * @returns {vec3} out\r\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\r\n * Scales a vec3 by a scalar number\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to scale\r\n * @param {Number} b amount to scale the vector by\r\n * @returns {vec3} out\r\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\r\n * Adds two vec3's after scaling the second operand by a scalar value\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} scale the amount to scale b by before adding\r\n * @returns {vec3} out\r\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\r\n * Calculates the euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} distance between a and b\r\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n/**\r\n * Calculates the squared euclidian distance between two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} squared distance between a and b\r\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Calculates the squared length of a vec3\r\n *\r\n * @param {vec3} a vector to calculate squared length of\r\n * @returns {Number} squared length of a\r\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\r\n * Negates the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to negate\r\n * @returns {vec3} out\r\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\r\n * Returns the inverse of the components of a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to invert\r\n * @returns {vec3} out\r\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\r\n * Normalize a vec3\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a vector to normalize\r\n * @returns {vec3} out\r\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\r\n * Calculates the dot product of two vec3's\r\n *\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {Number} dot product of a and b\r\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\r\n * Computes the cross product of two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @returns {vec3} out\r\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\r\n * Performs a linear interpolation between two vec3's\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\r\n * Performs a hermite interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Performs a bezier interpolation with two control points\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the first operand\r\n * @param {vec3} b the second operand\r\n * @param {vec3} c the third operand\r\n * @param {vec3} d the fourth operand\r\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\r\n * @returns {vec3} out\r\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\r\n * Generates a random vector with the given scale\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\r\n * @returns {vec3} out\r\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat4.\r\n * 4th vector component is implicitly '1'\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat4} m matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\r\n * Transforms the vec3 with a mat3.\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {mat3} m the 3x3 matrix to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\r\n * Transforms the vec3 with a quat\r\n * Can also be used for dual quaternions. (Multiply it with the real part)\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @param {vec3} a the vector to transform\r\n * @param {quat} q quaternion to transform with\r\n * @returns {vec3} out\r\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the x-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateX(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);\n  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the y-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateY(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Rotate a 3D vector around the z-axis\r\n * @param {vec3} out The receiving vec3\r\n * @param {vec3} a The vec3 point to rotate\r\n * @param {vec3} b The origin of the rotation\r\n * @param {Number} c The angle of rotation\r\n * @returns {vec3} out\r\n */\n\nexport function rotateZ(out, a, b, c) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);\n  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\r\n * Get the angle between two 3D vectors\r\n * @param {vec3} a The first operand\r\n * @param {vec3} b The second operand\r\n * @returns {Number} The angle in radians\r\n */\n\nexport function angle(a, b) {\n  var tempA = fromValues(a[0], a[1], a[2]);\n  var tempB = fromValues(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  var cosine = dot(tempA, tempB);\n\n  if (cosine > 1.0) {\n    return 0;\n  } else if (cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n/**\r\n * Set the components of a vec3 to zero\r\n *\r\n * @param {vec3} out the receiving vector\r\n * @returns {vec3} out\r\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\r\n * Returns a string representation of a vector\r\n *\r\n * @param {vec3} a vector to represent as a string\r\n * @returns {String} string representation of the vector\r\n */\n\nexport function str(a) {\n  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n}\n/**\r\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\r\n * Returns whether or not the vectors have approximately the same elements in the same position.\r\n *\r\n * @param {vec3} a The first vector.\r\n * @param {vec3} b The second vector.\r\n * @returns {Boolean} True if the vectors are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\r\n * Alias for {@link vec3.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;\n/**\r\n * Alias for {@link vec3.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link vec3.divide}\r\n * @function\r\n */\n\nexport var div = divide;\n/**\r\n * Alias for {@link vec3.distance}\r\n * @function\r\n */\n\nexport var dist = distance;\n/**\r\n * Alias for {@link vec3.squaredDistance}\r\n * @function\r\n */\n\nexport var sqrDist = squaredDistance;\n/**\r\n * Alias for {@link vec3.length}\r\n * @function\r\n */\n\nexport var len = length;\n/**\r\n * Alias for {@link vec3.squaredLength}\r\n * @function\r\n */\n\nexport var sqrLen = squaredLength;\n/**\r\n * Perform some operation over an array of vec3s.\r\n *\r\n * @param {Array} a the array of vectors to iterate over\r\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\r\n * @param {Number} offset Number of elements to skip at the beginning of the array\r\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\r\n * @param {Function} fn Function to call for each vector in the array\r\n * @param {Object} [arg] additional argument to pass to fn\r\n * @returns {Array} a\r\n * @function\r\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import Mat4 = require('gl-matrix/mat4');\r\nimport Vec3 = require('gl-matrix/vec3');\r\n\r\nimport terrainVertextShaderSource from './shaders/terrain.vertex.glsl';\r\nimport terrainFragmentShaderSource from './shaders/terrain.fragment.glsl';\r\nimport waterVertextShaderSource from './shaders/water.vertex.glsl';\r\nimport waterFragmentShaderSource from './shaders/water.fragment.glsl';\r\nimport sunVertextShaderSource from './shaders/sun.vertex.glsl';\r\nimport sunFragmentShaderSource from './shaders/sun.fragment.glsl';\r\nimport {createTerrain} from './create-terrain';\r\nimport {initControls} from './init-contol';\r\nimport {createWater} from './create-water';\r\nimport {createSun} from './create-sun';\r\nimport {renderProperties} from './render-properties';\r\nimport {createFramebufferAndTexture, createProgram, loadTexture, createBuffer, bindBuffer} from './utils';\r\n\r\nimport {ProgramProperties, BufferObject, Program} from './types';\r\n\r\nwindow.addEventListener('load', setup);\r\n\r\nconst CANVAS_WIDTH = 512;\r\nconst CANVAS_HEIGHT = 512;\r\n\r\nconst WATER_SIZE = 512;\r\n\r\nconst DETAILS_LEVEL = 5;\r\n\r\nasync function setup() {\r\n    const canvas = document.querySelector('canvas')!;\r\n    canvas.width = CANVAS_WIDTH;\r\n    canvas.height = CANVAS_HEIGHT;\r\n    const gl = canvas.getContext('experimental-webgl');\r\n    if (!gl) {\r\n        console.warn('Can not create webgl context');\r\n        return;\r\n    }\r\n\r\n    const propertiesNode = document.querySelector('[data-properties]') as HTMLTableElement;\r\n\r\n    const terrainProgram = createProgram(\r\n        gl,\r\n        terrainVertextShaderSource,\r\n        terrainFragmentShaderSource\r\n    );\r\n    const waterProgram = createProgram(\r\n        gl,\r\n        waterVertextShaderSource,\r\n        waterFragmentShaderSource\r\n    );\r\n    const sunProgram = createProgram(\r\n        gl,\r\n        sunVertextShaderSource,\r\n        sunFragmentShaderSource\r\n    )\r\n    \r\n    const terrainData = await createTerrain('heightmaps/mountain2.png', 500 / DETAILS_LEVEL, DETAILS_LEVEL);\r\n    const terrain = terrainData && createBuffers(gl, {\r\n        arrays: terrainData\r\n    });\r\n\r\n    const dudvTexture = await loadTexture(gl, 'textures/dudvmap.png');\r\n    const normalMapTexture = await loadTexture(gl, 'textures/normalmap.png');\r\n    const [\r\n        refractionTexture,\r\n        refractionFramebuffer\r\n    ] = createFramebufferAndTexture(gl, WATER_SIZE, WATER_SIZE);\r\n    const [\r\n        reflectionTexture,\r\n        reflectionFramebuffer\r\n    ] = createFramebufferAndTexture(gl, WATER_SIZE, WATER_SIZE);\r\n    const water = createBuffers(gl, {\r\n        arrays: createWater(),\r\n        framebuffers: {\r\n            refraction: refractionFramebuffer,\r\n            reflection: reflectionFramebuffer\r\n        },\r\n        textures: {\r\n            dudv: dudvTexture,\r\n            normalMap: normalMapTexture,\r\n            refraction: refractionTexture,\r\n            reflection: reflectionTexture\r\n        }\r\n    });\r\n\r\n    const sun = createBuffers(gl, {\r\n        arrays: createSun()\r\n    });\r\n\r\n    if (!water || !waterProgram || !terrainProgram || !terrain || !sunProgram) {\r\n        return;\r\n    }\r\n\r\n    const properties: ProgramProperties = {\r\n        center: Vec3.fromValues(-23.0, +20.0, 0.0),\r\n        cameraPosition: Vec3.fromValues(-24.2, -254.7, +53.7),\r\n\r\n        directionalLightVector: Vec3.fromValues(0, 0, 1),\r\n        start: Date.now(),\r\n        time: 0,\r\n        renderWater: true,\r\n        renderTerrain: true,\r\n        useReflection: true,\r\n        useRefraction: true,\r\n        renderSun: true\r\n    };\r\n\r\n    const emitter = initControls(canvas);\r\n\r\n    emitter\r\n        .on('toggleRenderWater', () => {\r\n            properties.renderWater = !properties.renderWater;\r\n            updateProperties();\r\n        })\r\n        .on('toggleRenderTerrain', () => {\r\n            properties.renderTerrain = !properties.renderTerrain;\r\n            updateProperties();\r\n        })\r\n        .on('toggleRefraction', () => {\r\n            properties.useRefraction = !properties.useRefraction;\r\n            updateProperties();\r\n        })\r\n        .on('toggleReflection', () => {\r\n            properties.useReflection = !properties.useReflection;\r\n            updateProperties();\r\n        })\r\n        .on('toggleRenderSun', () => {\r\n            properties.renderSun = !properties.renderSun;\r\n            updateProperties();\r\n        })\r\n        .on('zoom', e => {\r\n            const {cameraPosition, center} = properties;\r\n            const eye = Vec3.create();\r\n            const distance = Vec3.distance(center, cameraPosition);\r\n            const nextDistance = distance + e.dy;\r\n            if (nextDistance <= 50 || nextDistance >= 300) {\r\n                return;\r\n            }\r\n            Vec3.sub(eye, cameraPosition, center);\r\n            Vec3.scale(eye, eye, nextDistance / distance);\r\n            Vec3.add(cameraPosition, center, eye);\r\n            updateProperties();\r\n        })\r\n        .on('move', e => {\r\n            const move = Vec3.fromValues(e.dx, e.dy, 0);\r\n            const {cameraPosition, center} = properties;\r\n            Vec3.add(cameraPosition, cameraPosition, move);\r\n            Vec3.add(center, center, move);\r\n            updateProperties();\r\n        })\r\n        .on('rotate', e => {\r\n            const {cameraPosition, center} = properties;\r\n            const distance = Vec3.distance(center, cameraPosition);\r\n            const eye = Vec3.create();\r\n            Vec3.sub(eye, cameraPosition, center);\r\n            Vec3.add(eye, eye, [e.dx, e.dy, 0]);\r\n            Vec3.normalize(eye, eye);\r\n            Vec3.scale(eye, eye, distance);\r\n            Vec3.add(cameraPosition, center, eye);\r\n            updateProperties();\r\n        })\r\n        .on('changeLight', e => {\r\n            const {directionalLightVector} = properties;\r\n            Vec3.rotateZ(directionalLightVector, directionalLightVector, [0, 1, 1], e.dl);\r\n            updateProperties();\r\n        })\r\n    \r\n    const updateProperties = () => {\r\n        renderProperties(propertiesNode, properties);\r\n    }\r\n\r\n    function render() {\r\n        properties.time = Date.now() - properties.start;\r\n        drawScene({\r\n            gl: gl!,\r\n            terrainProgram: terrainProgram!,\r\n            waterProgram: waterProgram!,\r\n            sunProgram: sunProgram!,\r\n            properties,\r\n            terrain: terrain!,\r\n            water: water!,\r\n            sun\r\n        });\r\n        requestAnimationFrame(render);\r\n    }\r\n    \r\n    render();\r\n    updateProperties();\r\n}\r\n\r\nfunction createBuffers(\r\n    gl: WebGLRenderingContext,\r\n    opts: {\r\n        arrays: {\r\n            [key: string]: number[]\r\n        },\r\n        textures?: BufferObject['textures'],\r\n        framebuffers?: BufferObject['framebuffers']\r\n    }\r\n): BufferObject {\r\n    const {arrays, textures = {}, framebuffers = {}} = opts;\r\n    return {\r\n        buffers: {\r\n            position: createBuffer(gl, gl.ARRAY_BUFFER, new Float32Array(arrays.position)),\r\n            colors: createBuffer(gl, gl.ARRAY_BUFFER, new Float32Array(arrays.colors)),\r\n            indices: createBuffer(gl, gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(arrays.indices)),\r\n            normal: createBuffer(gl, gl.ARRAY_BUFFER, new Float32Array(arrays.normals)),\r\n            texture: createBuffer(gl, gl.ARRAY_BUFFER, new Float32Array(arrays.texture))\r\n        },\r\n        textures,\r\n        framebuffers,\r\n        size: arrays.indices.length\r\n    }\r\n}\r\n\r\nfunction createMatrices(properties: ProgramProperties, flip: boolean = false) {\r\n    const projection = Mat4.create();\r\n    const model = Mat4.create();\r\n    let eye: Vec3;\r\n    if (flip) {\r\n        eye = Vec3.create();\r\n        Vec3.sub(eye, properties.cameraPosition, properties.center);\r\n        eye[2] = -eye[2];\r\n        Vec3.add(eye, eye, properties.center);\r\n    } else {\r\n        eye = properties.cameraPosition;\r\n    }\r\n    Mat4.perspective(projection, 45 * Math.PI / 180, CANVAS_WIDTH / CANVAS_HEIGHT, 0.1, 1000.0);\r\n    Mat4.lookAt(model, eye, properties.center, [0, 1, 0]);\r\n    return {model, projection};\r\n}\r\n\r\nfunction drawScene(props: {\r\n    gl: WebGLRenderingContext,\r\n    terrainProgram: Program,\r\n    waterProgram: Program,\r\n    sunProgram: Program,\r\n    properties: ProgramProperties,\r\n    terrain: BufferObject,\r\n    water: BufferObject,\r\n    sun: BufferObject\r\n}) {\r\n    \r\n    const waterHeight = 50 / DETAILS_LEVEL;\r\n    const {gl, terrainProgram, waterProgram, sunProgram, properties, terrain, water, sun} = props;\r\n\r\n    const renderTerrain = (clipLevel: -1 | 1 | 0, flip: boolean) => {\r\n        if (!properties.renderTerrain) {\r\n            return;\r\n        }\r\n        const {model, projection} = createMatrices(properties, flip);\r\n        // reflection\r\n        if (flip) {\r\n            Mat4.translate(model, model, [0, 0, 2 * clipLevel * waterHeight]);\r\n        }\r\n\r\n        gl.useProgram(terrainProgram.program);\r\n        bindBuffer(gl, terrain.buffers.position, terrainProgram.attributes.position, 3);\r\n        // bindBuffer(gl, terrain.buffers.texture, terrainProgram.attributes.textureCoord, 2);\r\n        bindBuffer(gl, terrain.buffers.normal, terrainProgram.attributes.normal, 3);\r\n        bindBuffer(gl, terrain.buffers.colors, terrainProgram.attributes.colors, 4);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, terrain.buffers.indices);\r\n\r\n        gl.uniformMatrix4fv(\r\n            terrainProgram.uniforms.projection,\r\n            false,\r\n            projection\r\n        );\r\n        gl.uniformMatrix4fv(\r\n            terrainProgram.uniforms.model,\r\n            false,\r\n            model\r\n        );\r\n\r\n        gl.uniform3fv(terrainProgram.uniforms.directionalLightVector, properties.directionalLightVector);\r\n        gl.uniform1f(terrainProgram.uniforms.clipZ, waterHeight);\r\n        gl.uniform1f(terrainProgram.uniforms.clipLevel, clipLevel);\r\n\r\n        // gl.activeTexture(gl.TEXTURE0);\r\n        // gl.bindTexture(gl.TEXTURE_2D, terrain.textures.surface);\r\n        // gl.uniform1i(terrainProgram.uniforms.texture, 0);\r\n\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.drawElements(gl.TRIANGLES, terrain.size, gl.UNSIGNED_SHORT, 0);\r\n        gl.disable(gl.BLEND);\r\n    }\r\n\r\n    const updateRefractionTexture = () => {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, water.framebuffers.refraction);\r\n        gl.viewport(0, 0, WATER_SIZE, WATER_SIZE);\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        renderTerrain(1, false);\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    }\r\n    const updateReflectionTexture = () => {\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, water.framebuffers.reflection);\r\n        gl.viewport(0, 0, WATER_SIZE, WATER_SIZE);\r\n        gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n        renderTerrain(-1, true);\r\n        renderSun();\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    }\r\n\r\n    const renderWater = () => {\r\n        if (!properties.renderWater) {\r\n            return;\r\n        }\r\n        const {model, projection} = createMatrices(properties);\r\n        Mat4.translate(model, model, [0, 0, waterHeight]);\r\n        Mat4.scale(model, model, [WATER_SIZE, WATER_SIZE, 1]);\r\n\r\n        gl.useProgram(waterProgram.program);\r\n        bindBuffer(gl, water.buffers.position, waterProgram.attributes.position, 3);\r\n        bindBuffer(gl, water.buffers.texture, waterProgram.attributes.textureCoord, 2);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, water.buffers.indices);\r\n\r\n        gl.uniform1f(waterProgram.uniforms.dudvOffset, (properties.time / 1000 * 0.06) % 1);\r\n        gl.uniform1i(waterProgram.uniforms.useRefraction, Number(properties.useRefraction));\r\n        gl.uniform1i(waterProgram.uniforms.useReflection, Number(properties.useReflection));\r\n        gl.uniform3fv(waterProgram.uniforms.center, properties.center);\r\n        gl.uniform3fv(waterProgram.uniforms.cameraPosition, properties.cameraPosition);\r\n        gl.uniform3fv(waterProgram.uniforms.directionalLightVector, properties.directionalLightVector);\r\n        gl.uniformMatrix4fv(\r\n            waterProgram.uniforms.projection,\r\n            false,\r\n            projection\r\n        );\r\n\r\n        gl.uniformMatrix4fv(\r\n            waterProgram.uniforms.model,\r\n            false,\r\n            model\r\n        );\r\n\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, water.textures.dudv);\r\n        gl.uniform1i(waterProgram.uniforms.dudvTexture, 0);\r\n\r\n        gl.activeTexture(gl.TEXTURE1);\r\n        gl.bindTexture(gl.TEXTURE_2D, water.textures.normalMap);\r\n        gl.uniform1i(waterProgram.uniforms.normalMapTexture, 1);\r\n\r\n        gl.activeTexture(gl.TEXTURE2);\r\n        gl.bindTexture(gl.TEXTURE_2D, water.textures.refraction);\r\n        gl.uniform1i(waterProgram.uniforms.refractionTexture, 2);\r\n\r\n        gl.activeTexture(gl.TEXTURE3);\r\n        gl.bindTexture(gl.TEXTURE_2D, water.textures.reflection);\r\n        gl.uniform1i(waterProgram.uniforms.reflectionTexture, 3);\r\n\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.drawElements(gl.TRIANGLES, water.size, gl.UNSIGNED_SHORT, 0);\r\n        gl.disable(gl.BLEND);\r\n    }\r\n\r\n    function renderSun() {\r\n        if (!properties.renderSun) {\r\n            return;\r\n        }\r\n\r\n        const {model, projection} = createMatrices(properties);\r\n        const translate = Vec3.create();\r\n        Vec3.normalize(translate, properties.directionalLightVector);\r\n        Mat4.scale(model, model, [10, 10, 10]);\r\n        Vec3.scale(translate, translate, 10);\r\n        Mat4.translate(model, model, translate);\r\n        // Mat4.lookAt(projection, properties.cameraPosition, [0, 0, 100], [0, 0, 0]);\r\n\r\n        gl.useProgram(sunProgram.program);\r\n\r\n        bindBuffer(gl, sun.buffers.position, sunProgram.attributes.position, 3);\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, sun.buffers.indices);\r\n\r\n        gl.uniformMatrix4fv(\r\n            sunProgram.uniforms.projection,\r\n            false,\r\n            projection\r\n        );\r\n\r\n        gl.uniformMatrix4fv(\r\n            sunProgram.uniforms.model,\r\n            false,\r\n            model\r\n        );\r\n\r\n        gl.enable(gl.BLEND);\r\n        gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\r\n        gl.drawElements(gl.TRIANGLES, sun.size, gl.UNSIGNED_SHORT, 0);\r\n        gl.disable(gl.BLEND);\r\n    }\r\n\r\n    gl.clearDepth(1.0);\r\n    gl.clearColor(0.53, 0.8, 0.98, 1.);\r\n    gl.enable(gl.DEPTH_TEST);\r\n    gl.depthFunc(gl.LEQUAL);   \r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n\r\n    if (properties.renderWater) {\r\n        updateReflectionTexture();\r\n        updateRefractionTexture();\r\n    }\r\n    \r\n    gl.viewport(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\r\n\r\n    renderTerrain(0, false);\r\n    renderWater();\r\n    renderSun();\r\n\r\n}\r\n","import * as glMatrix from \"./common.js\";\n/**\r\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\r\n * @module mat4\r\n */\n\n/**\r\n * Creates a new identity mat4\r\n *\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 initialized with values from an existing matrix\r\n *\r\n * @param {mat4} a matrix to clone\r\n * @returns {mat4} a new 4x4 matrix\r\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Copy the values from one mat4 to another\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Create a new mat4 with the given values\r\n *\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} A new mat4\r\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set the components of a mat4 to the given values\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\r\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\r\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\r\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\r\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\r\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\r\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\r\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\r\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\r\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\r\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\r\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\r\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\r\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\r\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\r\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\r\n * @returns {mat4} out\r\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\r\n * Set a mat4 to the identity matrix\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @returns {mat4} out\r\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Transpose the values of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Inverts a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\r\n * Calculates the adjugate of a mat4\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the source matrix\r\n * @returns {mat4} out\r\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\r\n * Calculates the determinant of a mat4\r\n *\r\n * @param {mat4} a the source matrix\r\n * @returns {Number} determinant of a\r\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\r\n * Multiplies two mat4s\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\r\n * Translate a mat4 by the given vector\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to translate\r\n * @param {vec3} v vector to translate by\r\n * @returns {mat4} out\r\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\r\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {vec3} v the vec3 to scale the matrix by\r\n * @returns {mat4} out\r\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\r\n * Rotates a mat4 by the given angle around the given axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the X axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Y axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\r\n * Rotates a matrix by the given angle around the Z axis\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to rotate\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a vector scaling\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.scale(dest, dest, vec);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {vec3} v Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a given angle around a given axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotate(dest, dest, rad, axis);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @param {vec3} axis the axis to rotate around\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the X axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateX(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Y axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateY(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from the given angle around the Z axis\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.rotateZ(dest, dest, rad);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {Number} rad the angle to rotate the matrix by\r\n * @returns {mat4} out\r\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation and vector translation\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a new mat4 from a dual quat.\r\n *\r\n * @param {mat4} out Matrix\r\n * @param {quat2} a Dual Quaternion\r\n * @returns {mat4} mat4 receiving operation result\r\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\r\n * Returns the translation vector component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslation,\r\n *  the returned vector will be the same as the translation vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive translation component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\r\n * Returns the scaling factor component of a transformation\r\n *  matrix. If a matrix is built with fromRotationTranslationScale\r\n *  with a normalized Quaternion paramter, the returned vector will be\r\n *  the same as the scaling vector\r\n *  originally supplied.\r\n * @param  {vec3} out Vector to receive scaling factor component\r\n * @param  {mat4} mat Matrix to be decomposed (input)\r\n * @return {vec3} out\r\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n/**\r\n * Returns a quaternion representing the rotational component\r\n *  of a transformation matrix. If a matrix is built with\r\n *  fromRotationTranslation, the returned quaternion will be the\r\n *  same as the quaternion originally supplied.\r\n * @param {quat} out Quaternion to receive the rotation component\r\n * @param {mat4} mat Matrix to be decomposed (input)\r\n * @return {quat} out\r\n */\n\nexport function getRotation(out, mat) {\n  // Algorithm taken from http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n  var trace = mat[0] + mat[5] + mat[10];\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if (mat[0] > mat[5] && mat[0] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\r\n * This is equivalent to (but much faster than):\r\n *\r\n *     mat4.identity(dest);\r\n *     mat4.translate(dest, vec);\r\n *     mat4.translate(dest, origin);\r\n *     let quatMat = mat4.create();\r\n *     quat4.toMat4(quat, quatMat);\r\n *     mat4.multiply(dest, quatMat);\r\n *     mat4.scale(dest, scale)\r\n *     mat4.translate(dest, negativeOrigin);\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat4} q Rotation quaternion\r\n * @param {vec3} v Translation vector\r\n * @param {vec3} s Scaling vector\r\n * @param {vec3} o The origin vector around which to scale and rotate\r\n * @returns {mat4} out\r\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Calculates a 4x4 matrix from the given quaternion\r\n *\r\n * @param {mat4} out mat4 receiving operation result\r\n * @param {quat} q Quaternion to create matrix from\r\n *\r\n * @returns {mat4} out\r\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a frustum matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Number} left Left bound of the frustum\r\n * @param {Number} right Right bound of the frustum\r\n * @param {Number} bottom Bottom bound of the frustum\r\n * @param {Number} top Top bound of the frustum\r\n * @param {Number} near Near bound of the frustum\r\n * @param {Number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given bounds.\r\n * Passing null/undefined/no value for far will generate infinite projection matrix.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} fovy Vertical field of view in radians\r\n * @param {number} aspect Aspect ratio. typically viewport width/height\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum, can be null or Infinity\r\n * @returns {mat4} out\r\n */\n\nexport function perspective(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\r\n * Generates a perspective projection matrix with the given field of view.\r\n * This is primarily useful for generating projection matrices to be used\r\n * with the still experiemental WebVR API.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\r\n * Generates a orthogonal projection matrix with the given bounds\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {number} left Left bound of the frustum\r\n * @param {number} right Right bound of the frustum\r\n * @param {number} bottom Bottom bound of the frustum\r\n * @param {number} top Top bound of the frustum\r\n * @param {number} near Near bound of the frustum\r\n * @param {number} far Far bound of the frustum\r\n * @returns {mat4} out\r\n */\n\nexport function ortho(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\r\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\r\n * Generates a matrix that makes something look at something else.\r\n *\r\n * @param {mat4} out mat4 frustum matrix will be written into\r\n * @param {vec3} eye Position of the viewer\r\n * @param {vec3} center Point the viewer is looking at\r\n * @param {vec3} up vec3 pointing up\r\n * @returns {mat4} out\r\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n;\n/**\r\n * Returns a string representation of a mat4\r\n *\r\n * @param {mat4} a matrix to represent as a string\r\n * @returns {String} string representation of the matrix\r\n */\n\nexport function str(a) {\n  return 'mat4(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ', ' + a[9] + ', ' + a[10] + ', ' + a[11] + ', ' + a[12] + ', ' + a[13] + ', ' + a[14] + ', ' + a[15] + ')';\n}\n/**\r\n * Returns Frobenius norm of a mat4\r\n *\r\n * @param {mat4} a the matrix to calculate Frobenius norm of\r\n * @returns {Number} Frobenius norm\r\n */\n\nexport function frob(a) {\n  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2));\n}\n/**\r\n * Adds two mat4's\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\r\n * Subtracts matrix b from matrix a\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @returns {mat4} out\r\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\r\n * Multiply each element of the matrix by a scalar.\r\n *\r\n * @param {mat4} out the receiving matrix\r\n * @param {mat4} a the matrix to scale\r\n * @param {Number} b amount to scale the matrix's elements by\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\r\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\r\n *\r\n * @param {mat4} out the receiving vector\r\n * @param {mat4} a the first operand\r\n * @param {mat4} b the second operand\r\n * @param {Number} scale the amount to scale b's elements by before adding\r\n * @returns {mat4} out\r\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\r\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\r\n * Returns whether or not the matrices have approximately the same elements in the same position.\r\n *\r\n * @param {mat4} a The first matrix.\r\n * @param {mat4} b The second matrix.\r\n * @returns {Boolean} True if the matrices are equal, false otherwise.\r\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\r\n * Alias for {@link mat4.multiply}\r\n * @function\r\n */\n\nexport var mul = multiply;\n/**\r\n * Alias for {@link mat4.subtract}\r\n * @function\r\n */\n\nexport var sub = subtract;","module.exports = \"attribute vec4 position;\\r\\nattribute vec3 normal;\\r\\nattribute vec4 colors;\\r\\n\\r\\nuniform mat4 model;\\r\\nuniform mat4 projection;\\r\\nuniform vec3 directionalLightVector;\\r\\nuniform float clipZ;\\r\\nuniform float clipLevel;\\r\\n\\r\\nvarying highp vec3 vLighting;\\r\\nvarying lowp vec2 vTextureCoord;\\r\\nvarying lowp vec4 fragmentColor;\\r\\nvarying float shouldClip;\\r\\n\\r\\nvoid main() {\\r\\n  // light\\r\\n  //highp vec3 ambientLight = vec3(0.3, 0.3, 0.3);\\r\\n  highp vec3 ambientLight = vec3(0, 0, 0);\\r\\n  highp vec3 directionalLightColor = vec3(1, 1, 1);\\r\\n  highp vec3 directionalVector = normalize(directionalLightVector);\\r\\n\\r\\n  highp vec4 transformedNormal = vec4(normal, 1.0);\\r\\n  highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);\\r\\n  vLighting = ambientLight + (directionalLightColor * directional);\\r\\n\\r\\n  gl_Position = projection * model * position;\\r\\n\\r\\n  fragmentColor = colors;\\r\\n  if (clipLevel == 1.0) {\\r\\n    shouldClip = position.z > clipZ ? 1.0 : 0.0;\\r\\n  } else if (clipLevel == -1.0) {\\r\\n    shouldClip = position.z < clipZ ? 1.0 : 0.0;\\r\\n  } else {\\r\\n    shouldClip = 0.0;\\r\\n  }\\r\\n}\"","module.exports = \"varying highp vec3 vLighting;\\r\\nvarying highp float shouldClip;\\r\\nvarying lowp vec4 fragmentColor;\\r\\n\\r\\nconst lowp vec4 nothingColor = vec4(0.0, 0.0, 0.0, 0.0);\\r\\nconst lowp vec4 grassColor = vec4(0.12, 0.43, 0.02, 1.0);\\r\\nconst lowp vec4 snowColor = vec4(1.0);\\r\\nconst lowp vec4 groundColor = vec4(0.85, 0.84, 0.79, 1.0);\\r\\n\\r\\nvoid main() {\\r\\n  if (shouldClip == 1.0) {\\r\\n    discard;\\r\\n  }\\r\\n  lowp float x = fragmentColor.x;\\r\\n  lowp float groundGrassMixFactor = smoothstep(0.1, 0.2, x);\\r\\n  lowp float grassSnowMixFactor = smoothstep(0.7, 0.8, x);\\r\\n  lowp float nothingGroundMixFactor = smoothstep(0.01, 0.015, x);\\r\\n  lowp vec4 color = mix(groundColor, grassColor, groundGrassMixFactor);\\r\\n  color = mix(color, snowColor, grassSnowMixFactor);\\r\\n  color = mix(nothingColor, color, nothingGroundMixFactor);\\r\\n\\r\\n  gl_FragColor = vec4(color.rgb * vLighting, color.a);\\r\\n}\\r\\n\"","module.exports = \"attribute vec4 position;\\r\\nattribute vec2 textureCoord;\\r\\n\\r\\nuniform mat4 model;\\r\\nuniform mat4 projection;\\r\\nuniform vec3 cameraPosition;\\r\\n\\r\\nvarying highp vec2 vTextureCoord;\\r\\nvarying highp vec4 clipSpace;\\r\\nvarying highp vec3 fromFragmentToCamera;\\r\\n\\r\\nconst lowp float tiling = 10.0;\\r\\n\\r\\nvoid main() {\\r\\n    vec4 worldPosition = model * position;\\r\\n    gl_Position = clipSpace = projection * worldPosition;\\r\\n\\r\\n    fromFragmentToCamera = cameraPosition - worldPosition.xyz;\\r\\n    vTextureCoord = textureCoord * tiling;\\r\\n}\"","module.exports = \"varying lowp vec2 vTextureCoord;\\r\\nvarying lowp vec4 clipSpace;\\r\\nvarying lowp vec3 fromFragmentToCamera;\\r\\n\\r\\nuniform sampler2D dudvTexture;\\r\\nuniform sampler2D normalMapTexture;\\r\\nuniform sampler2D refractionTexture;\\r\\nuniform sampler2D reflectionTexture;\\r\\nuniform lowp float dudvOffset;\\r\\nuniform int useRefraction;\\r\\nuniform int useReflection;\\r\\nuniform lowp vec3 directionalLightVector;\\r\\n\\r\\nconst lowp float waterDistortionStrenth = 0.03;\\r\\nconst lowp float fresnelStrength = 1.5;\\r\\nconst lowp float waterReflectivity = 0.5;\\r\\nconst lowp vec3 sunlightColor = vec3(1.0, 1.0, 1.0);\\r\\n// const lowp vec3 directionalLightVector = normalize(vec3(-1.0, -1.0, 0.5));\\r\\nconst lowp vec4 shallowWaterColor =  vec4(0.0, 0.1, 0.3, 1.0);\\r\\nconst lowp vec4 deepWaterColor = vec4(0.0, 0.1, 0.2, 1.0);\\r\\nconst lowp float shineDamper = 20.0;\\r\\n\\r\\nvoid main() {\\r\\n    // distortion\\r\\n    lowp vec2 distortedTexCoords = texture2D(dudvTexture, vec2(vTextureCoord.x, vTextureCoord.y + dudvOffset)).xy * 0.1;\\r\\n    distortedTexCoords = vTextureCoord + vec2(distortedTexCoords.x + dudvOffset, distortedTexCoords.y);\\r\\n\\r\\n    lowp vec2 totalDistortion = (texture2D(dudvTexture, distortedTexCoords).xy * 2.0 - 1.0) * waterDistortionStrenth;\\r\\n\\r\\n    // base refract/reflect texture coordinates\\r\\n    lowp vec2 ndc = (clipSpace.xy / clipSpace.w) / 2.0 + 0.5;\\r\\n    lowp vec2 refractTexCoords = vec2(ndc.x, +ndc.y);\\r\\n    lowp vec2 reflectTexCoords = vec2(1.0 - ndc.x, +ndc.y);\\r\\n\\r\\n    // refractive factor\\r\\n    lowp vec3 toCamera = normalize(fromFragmentToCamera);\\r\\n    lowp vec4 normalMapColor = texture2D(normalMapTexture, distortedTexCoords);\\r\\n    lowp vec3 normal = vec3(\\r\\n      normalMapColor.r * 2.0 - 1.0,\\r\\n      normalMapColor.g * 2.0 - 1.0,\\r\\n      normalMapColor.b * 2.0 - 1.0\\r\\n    );\\r\\n    normal = normalize(normal);\\r\\n    lowp float refractiveFactor = dot(toCamera, normal);\\r\\n    refractiveFactor = pow(refractiveFactor, fresnelStrength);\\r\\n    // refractiveFactor = 0.5;\\r\\n\\r\\n    // puting all together\\r\\n    refractTexCoords += totalDistortion;\\r\\n    reflectTexCoords += totalDistortion;\\r\\n    // refractTexCoords = clamp(refractTexCoords, 0.001, 0.999);\\r\\n    // reflectTexCoords.x = clamp(reflectTexCoords.x, 0.001, 0.999);\\r\\n    // reflectTexCoords.y = clamp(reflectTexCoords.y, -0.999, -0.001);\\r\\n\\r\\n    // lighs\\r\\n    lowp vec3 reflectedLight = reflect(normalize(directionalLightVector), normal);\\r\\n    lowp float specular = max(dot(reflectedLight, toCamera), 0.0);\\r\\n    specular = pow(specular, shineDamper);\\r\\n    lowp vec3 specularHighlights = sunlightColor * specular * waterReflectivity;\\r\\n\\r\\n    // color\\r\\n    lowp vec4 refractColor = texture2D(refractionTexture, refractTexCoords);\\r\\n    lowp vec4 reflectColor = texture2D(reflectionTexture, reflectTexCoords);\\r\\n\\r\\n    if (useReflection == 1 && useRefraction == 1) {\\r\\n      gl_FragColor = mix(reflectColor, refractColor, refractiveFactor);\\r\\n    } else if (useReflection == 1) {\\r\\n      gl_FragColor = reflectColor;\\r\\n    } else if (useRefraction == 1) {\\r\\n      gl_FragColor = refractColor;\\r\\n    }\\r\\n    gl_FragColor = mix(gl_FragColor, shallowWaterColor, 0.2);\\r\\n\\r\\n    gl_FragColor = gl_FragColor + vec4(specularHighlights, 0.0);\\r\\n}\\r\\n\"","module.exports = \"\\r\\nattribute vec4 position;\\r\\n\\r\\nuniform mat4 model;\\r\\nuniform mat4 projection;\\r\\n\\r\\nvoid main() {\\r\\n    gl_Position = projection * model * position;\\r\\n}\"","module.exports = \"void main() {\\r\\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\r\\n}\"","import Vec3 = require('gl-matrix/vec3');\r\n\r\nexport async function createTerrain(src: string, maxHeight: number, size: number) {\r\n    const canvas = document.createElement('canvas');\r\n    const image = await loadImage(src);\r\n    canvas.width = image.width;\r\n    canvas.height = image.height;\r\n    const ctx = canvas.getContext('2d');\r\n    if (!ctx) {\r\n        return;\r\n    }\r\n    ctx.drawImage(image, 0, 0);\r\n    const {data} = ctx.getImageData(0, 0, image.width, image.height);\r\n    const u32 = new Uint32Array(data)\r\n    const levelHeight = 256 / maxHeight;\r\n\r\n    const width = Math.floor(image.width / size);\r\n    const height = Math.floor(image.height / size);\r\n    const heatmap = new Float32Array(width * height);\r\n    let max = 0;\r\n\r\n    console.time('heatmap')\r\n    for (let i = 0; i < height; i ++) {\r\n        for (let j = 0; j < width; j ++) {\r\n            let s = 0;\r\n            for (let k = 0; k < size; k ++) {\r\n                for (let l = 0; l < size; l ++) {\r\n                    s += u32[(i * size * image.width + j * size + k * size + l) * 4]\r\n                }\r\n            }\r\n            const v = s / size / size / levelHeight;\r\n            heatmap[i * width + j] = v;\r\n            if (max < v) {\r\n                max = v;\r\n            }\r\n        }\r\n    }\r\n    console.timeEnd('heatmap')\r\n\r\n    const position = [];\r\n    const indices = [];\r\n    const colors = [];\r\n    const normals = [];\r\n    const texture = [];\r\n\r\n    console.time('position')\r\n    for (let i = 0; i < height; i ++) {\r\n        for (let j = 0; j < width; j++) {\r\n            const k = i * width + j\r\n            const c = heatmap[k] / max;\r\n            position.push(\r\n                i - height / 2,\r\n                j - width / 2,\r\n                heatmap[k]\r\n            );\r\n            colors.push(c, c, c, 1)\r\n\r\n            if ((i !== height - 1) && (j !== width - 1)) {\r\n                indices.push(\r\n                    k,\r\n                    k + width,\r\n                    k + 1,\r\n                    k + 1,\r\n                    k + width,\r\n                    k + width + 1,\r\n                );\r\n            }\r\n            texture.push(j / width, i / height);\r\n            \r\n        }\r\n    }\r\n    console.timeEnd('position')\r\n\r\n    console.time('normal');\r\n    for (let i = 0; i < position.length / 3; i ++) {\r\n        const w = width;\r\n        const h = height;\r\n        const iw = i % w;\r\n        const ih = ~~(i / w);\r\n        const facesIndexes = [\r\n            iw > 0 && ih > 0 && [\r\n                i - w,\r\n                i - 1,\r\n                i,\r\n            ],\r\n            iw + 1 < w && ih > 0 && [\r\n                i - w,\r\n                i,\r\n                i - w + 1,\r\n            ],\r\n            iw + 1 < w && ih > 0 && [\r\n                i - w + 1,\r\n                i,\r\n                i + 1,\r\n            ],\r\n            iw > 0 && ih < h && [\r\n                i - 1,\r\n                i + w - 1,\r\n                i,\r\n            ],\r\n            iw > 0 && ih < h && [\r\n                i,\r\n                i + w - 1,\r\n                i + w,\r\n            ],\r\n            iw + 1 < w && ih < h && [\r\n                i,\r\n                i + w,\r\n                i + 1,\r\n            ],\r\n        ];\r\n        const faces = [];\r\n        const facesNormals = [];\r\n\r\n        for (let j = 0; j < facesIndexes.length; j ++) {\r\n            const f = facesIndexes[j];\r\n            for (let k = 0; k < 3; k ++) {\r\n                if (f) {\r\n                    faces.push(\r\n                        position[f[k] * 3],\r\n                        position[f[k] * 3 + 1],\r\n                        position[f[k] * 3 + 2],\r\n                    )\r\n                }\r\n            }\r\n        }\r\n        for (let j = 0; j < faces.length / 9; j ++) {\r\n            const p1 = Vec3.fromValues(\r\n                faces[j * 9 + 0],\r\n                faces[j * 9 + 1],\r\n                faces[j * 9 + 2]\r\n            );\r\n            const p2 = Vec3.fromValues(\r\n                faces[j * 9 + 3],\r\n                faces[j * 9 + 4],\r\n                faces[j * 9 + 5]\r\n            );\r\n            const p3 = Vec3.fromValues(\r\n                faces[j * 9 + 6],\r\n                faces[j * 9 + 7],\r\n                faces[j * 9 + 8]\r\n            );\r\n            ////\r\n            // U = p2 - p1\r\n            // V = p3 - p1\r\n            // N = U x V\r\n            ////\r\n            Vec3.subtract(p2, p2, p1)\r\n            Vec3.subtract(p3, p3, p1)\r\n            Vec3.cross(p2, p2, p3)\r\n            Vec3.normalize(p2, p2);\r\n            facesNormals.push(p2);\r\n        }\r\n\r\n        const n = Vec3.fromValues(0, 0, 0);\r\n        for (let j = 0; j < facesNormals.length; j ++) {\r\n            Vec3.add(n, n, facesNormals[j]);\r\n        }\r\n        Vec3.normalize(n, n);\r\n\r\n        normals.push(n[0], n[1], n[2]);\r\n    }\r\n    console.timeEnd('normal');\r\n\r\n    return {\r\n        position,\r\n        indices,\r\n        colors,\r\n        normals,\r\n        texture,\r\n    }\r\n}\r\n\r\nfunction loadImage(src: string): Promise<HTMLImageElement> {\r\n    return new Promise((resolve, reject) => {\r\n        const image = new Image();\r\n        image.src = src;\r\n        image.onload = () => resolve(image);\r\n        image.onerror = reject;\r\n    })\r\n}\r\n\r\nfunction print(arr: any, width: number) {\r\n    const lines = [];\r\n    for (let i = 0; i < arr.length / width; i ++) {\r\n        const line = arr.slice(width * i, width * (i + 1)).join(' ');\r\n        lines.push(line);\r\n    }\r\n    console.log('%c%s', 'font-size: 8px;', lines.join('\\n'));\r\n}","import {EventEmitter} from 'events';\r\n\r\nexport function initControls(elem: HTMLElement) {\r\n    let mousedown = false;\r\n    const ee = new EventEmitter();\r\n    const pressed: {[key: string]: boolean} = {};\r\n    const pullKeys = () => {\r\n        const s = 0.01;\r\n        let dl = 0;\r\n        let dx = 0;\r\n        let dy = 0;\r\n\r\n        if (pressed['[']) {\r\n            dl = -s;\r\n        } else if (pressed[']']) {\r\n            dl = s;\r\n        }\r\n        if (pressed.w) {\r\n            dy = 1;\r\n        } else if (pressed.s) {\r\n            dy = -1\r\n        }\r\n\r\n        if (pressed.a) {\r\n            dx = -1;\r\n        } else if (pressed.d) {\r\n            dx = 1;\r\n        }\r\n\r\n        if (dx || dy) {\r\n            ee.emit('move', { dx, dy });\r\n        }\r\n\r\n        if (dl) {\r\n            ee.emit('changeLight', {dl});\r\n        }\r\n\r\n        requestAnimationFrame(pullKeys);\r\n    }\r\n    pullKeys();\r\n\r\n    elem.addEventListener('wheel', e => {\r\n        const {deltaY: dy} = e;\r\n        if (dy) {\r\n            ee.emit('zoom', {\r\n                dy: dy / Math.abs(dy) * 10\r\n            });\r\n            e.preventDefault();\r\n        }\r\n    })\r\n    window.addEventListener('keypress', e => {\r\n        switch (e.key) {\r\n            case '1':\r\n                ee.emit('toggleRenderTerrain');\r\n                break;\r\n            case '2':\r\n                ee.emit('toggleRenderWater');\r\n                break;\r\n            case '3':\r\n                ee.emit('toggleRefraction');\r\n                break;\r\n            case '4':\r\n                ee.emit('toggleReflection');\r\n                break;\r\n            case '5':\r\n                ee.emit('toggleRenderSun');\r\n                break;\r\n            default:\r\n                pressed[e.key] = true;\r\n        }\r\n    });\r\n    window.addEventListener('keyup', e => {\r\n        pressed[e.key] = false;\r\n    })\r\n\r\n    elem.addEventListener('mousedown', () => {\r\n        mousedown = true;\r\n    })\r\n    window.addEventListener('mouseup', () => {\r\n        mousedown = false;\r\n    })\r\n    window.addEventListener('mousemove', e => {\r\n        const {movementX, movementY} = e;\r\n        if (mousedown) {\r\n            ee.emit('rotate', {dx: -movementX, dy: movementY})\r\n        }\r\n    })\r\n    return ee;\r\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","export function createWater() {\r\n    const position = [\r\n        -0.5, -0.5, 0,\r\n        +0.5, -0.5, 0,\r\n        -0.5, +0.5, 0,\r\n        +0.5, +0.5, 0,\r\n    ];\r\n    const indices = [\r\n        0, 2, 1,\r\n        1, 2, 3\r\n    ];\r\n    const texture = [\r\n        0, 0,\r\n        1, 0,\r\n        0, 1,\r\n        1, 1\r\n    ];\r\n\r\n    return {position, indices, texture};\r\n}","export function createSun() {\r\n    /*\r\n    const position = [\r\n        50, 0, 100,\r\n        50, 100, 100,\r\n        150, 100, 100\r\n    ];\r\n    */\r\n    const position = [];\r\n    const indices = [];\r\n    const R = 1;\r\n    const Z = 0;\r\n    const vertextCount = 100;\r\n    position.push(0, 0, Z);\r\n    for (let i = 0; i < vertextCount; i ++) {\r\n        const a = Math.PI * 2 * i / vertextCount;\r\n        position.push(\r\n            R * Math.cos(a),\r\n            R * Math.sin(a),\r\n            Z\r\n        )\r\n        if (i < vertextCount - 1) {\r\n            indices.push(0, i, i + 1);\r\n        }\r\n    }\r\n    indices.push(0, 1, vertextCount - 1);\r\n\r\n    return {position, indices};\r\n}","import {ProgramProperties} from './types';\r\n\r\nconst arrToString = (arr: Float32Array) => {\r\n    return Array.from(arr)\r\n        .map(i => {\r\n            const sign = i > 0 ? '+' : '-';\r\n            return sign + Math.abs(i).toFixed(1)\r\n        })\r\n        .join(', ')\r\n}\r\n\r\nexport function renderProperties(node: HTMLTableElement, properties: ProgramProperties) {\r\n\r\n    const info = [\r\n        {\r\n            title: 'center',\r\n            control: 'a d w s',\r\n            value: arrToString(properties.center)\r\n        },\r\n        {\r\n            title: 'camera',\r\n            control: 'a d w s wheel',\r\n            value: arrToString(properties.cameraPosition)\r\n        },\r\n        {\r\n            title: 'ligth',\r\n            control: '[ ]',\r\n            value: arrToString(properties.directionalLightVector)\r\n        },\r\n        {\r\n            title: 'terrain',\r\n            control: '1',\r\n            value: properties.renderTerrain\r\n        },\r\n        {\r\n            title: 'water',\r\n            control: '2',\r\n            value: properties.renderWater\r\n        },\r\n        {\r\n            title: 'use refraction',\r\n            control: '3',\r\n            value: properties.useRefraction\r\n        },\r\n        {\r\n            title: 'use reflection',\r\n            control: '4',\r\n            value: properties.useReflection\r\n        },\r\n        {\r\n            title: 'render sun disk',\r\n            control: '5',\r\n            value: properties.renderSun\r\n        }\r\n    ];\r\n    const columns = ['title', 'control', 'value'];\r\n    const body = node.querySelector('tbody')!;\r\n    body.innerHTML = '';\r\n\r\n    info.forEach((item: any) => {\r\n        const tr = document.createElement('tr');\r\n        columns.forEach(key => {\r\n            const td = document.createElement('td');\r\n            td.innerText = key in item ? item[key] : '';\r\n            tr.appendChild(td);\r\n        })\r\n        body.appendChild(tr);\r\n    })\r\n}","import {Program} from './types';\r\n\r\nfunction createShader(gl: WebGLRenderingContext, type: number, source: string) {\r\n    const shader = gl.createShader(type);\r\n    if (!shader) {\r\n        return null;\r\n    }\r\n    gl.shaderSource(shader, source);\r\n    gl.compileShader(shader);\r\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n        console.warn(gl.getShaderInfoLog(shader));\r\n        console.warn(source);\r\n        gl.deleteShader(shader);\r\n        return null;\r\n    }\r\n    return shader;\r\n}\r\n\r\n\r\nexport async function loadTexture(gl: WebGLRenderingContext, url: string) {\r\n    const image: HTMLImageElement = await new Promise((resolve, reject) => {\r\n        const image = new Image();\r\n        image.src = url;\r\n        image.onload = () => resolve(image);\r\n        image.onerror = reject;\r\n    });\r\n    const texture = gl.createTexture();\r\n    const isPow2 = (n: number) => (n & (n - 1)) === 0;\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D, 0, gl.RGBA,\r\n        1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,\r\n        new Uint8Array([0, 0, 255, 255])\r\n    );\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D, 0, gl.RGBA,\r\n        gl.RGBA, gl.UNSIGNED_BYTE, image\r\n    );\r\n\r\n    if (isPow2(image.width) && isPow2(image.height)) {\r\n        gl.generateMipmap(gl.TEXTURE_2D);\r\n    } else {\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    }\r\n\r\n    return texture as WebGLTexture;\r\n\r\n}\r\n\r\nexport function createProgram(\r\n    gl: WebGLRenderingContext,\r\n    vertextShaderSource: string,\r\n    fragmentShaderSource: string,\r\n): Program | null {\r\n\r\n    const vertexShader = createShader(gl,  gl.VERTEX_SHADER, vertextShaderSource);\r\n    const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fragmentShaderSource);\r\n    const program = gl.createProgram();\r\n\r\n    if (!program || !vertexShader || !fragmentShader) {\r\n        console.warn('Failed to create shader program');\r\n        return null;\r\n    }\r\n    gl.attachShader(program, vertexShader);\r\n    gl.attachShader(program, fragmentShader);\r\n    gl.linkProgram(program);\r\n\r\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\r\n        console.warn(gl.getProgramInfoLog(program));\r\n        return null;\r\n    }\r\n    const attributes: Program['attributes'] = {};\r\n    const uniforms: Program['uniforms'] = {};\r\n    const attributesCount = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\r\n    const uniformsCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\r\n\r\n    for (let i = 0; i < attributesCount; i ++) {\r\n        const name = gl.getActiveAttrib(program, i)!.name;\r\n        attributes[name] = gl.getAttribLocation(program, name);\r\n    }\r\n    for (let i = 0; i < uniformsCount; i ++) {\r\n        const name = gl.getActiveUniform(program, i)!.name;\r\n        uniforms[name] = gl.getUniformLocation(program, name) as WebGLUniformLocation;\r\n    }\r\n\r\n    return {program, uniforms, attributes};\r\n}\r\n\r\nexport function createBuffer(gl: WebGLRenderingContext, type: number, data: Float32Array | Uint16Array) {\r\n    const buffer = gl.createBuffer();\r\n    gl.bindBuffer(type, buffer);\r\n    gl.bufferData(\r\n        type,\r\n        data,\r\n        gl.STATIC_DRAW\r\n    );\r\n    return buffer as WebGLBuffer;\r\n}\r\n\r\nexport function bindBuffer(gl: WebGLRenderingContext, buffer: WebGLBuffer, attribute: number, numComponents: number) {\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\r\n    gl.vertexAttribPointer(\r\n        attribute,\r\n        numComponents,\r\n        gl.FLOAT,\r\n        false,\r\n        0,\r\n        0\r\n    );\r\n    gl.enableVertexAttribArray(attribute);\r\n}\r\n\r\n\r\nexport function createFramebufferAndTexture(gl: WebGLRenderingContext, width: number, height: number) {\r\n    const texture = gl.createTexture() as WebGLTexture;\r\n    const framebuffer = gl.createFramebuffer() as WebGLFramebuffer;\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\r\n\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(\r\n        gl.TEXTURE_2D, 0, gl.RGBA,\r\n        width, height, 0,\r\n        gl.RGBA, gl.UNSIGNED_BYTE, null\r\n    );\r\n\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\r\n\r\n    gl.framebufferTexture2D(\r\n        gl.FRAMEBUFFER,\r\n        gl.COLOR_ATTACHMENT0,\r\n        gl.TEXTURE_2D,\r\n        texture,\r\n        0\r\n    );\r\n\r\n\r\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\r\n    return [texture, framebuffer];\r\n}\r\n"],"sourceRoot":""}